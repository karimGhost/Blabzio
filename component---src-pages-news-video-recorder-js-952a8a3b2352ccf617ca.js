"use strict";(self.webpackChunkblabzio=self.webpackChunkblabzio||[]).push([[5691],{6109:function(e,t,r){r.r(t);var a=r(7294);t.default=e=>{const t="video/webm",r=(0,a.useRef)(null),{0:n,1:o}=(0,a.useState)("inactive"),{0:i,1:l}=(0,a.useState)([]),s=e.stream,c=(e.setStream,e.permission),d=e.setPermission,m=e.recordedVideo,u=e.setRecordedVideo,p=e.mediaRecorder,{0:b,1:g}=(0,a.useState)("user");(0,a.useEffect)((()=>{c&&r.current&&s&&(r.current.srcObject=s)}),[c,s]);return a.createElement("div",null,a.createElement("main",null,a.createElement("div",{className:"video-controls"}),c&&r?a.createElement("div",{style:{position:"relative"},className:"video-player"},"recording"===n&&a.createElement("span",{style:{color:"red"}}," ",a.createElement("ul",null,a.createElement("li",{style:{color:"red",position:"absolute",zIndex:"20"},className:"recordmode"},n))),a.createElement("video",{className:"live-player w-100 m-50",ref:r,autoPlay:!0,playsInline:!0}),c&&"inactive"===n?a.createElement("button",{style:{zIndex:"20",position:"absolute",bottom:"0",color:"red",borderRadius:"50%",width:"3rem",height:"3rem",background:"transparent",border:"2px solid green",marginLeft:"50%",marginRight:"50%"},onClick:async()=>{o("recording");const e=new MediaRecorder(s,{mimeType:t});p.current=e,p.current.start();let r=[];p.current.ondataavailable=e=>{void 0!==e.data&&0!==e.data.size&&r.push(e.data)},l(r)},type:"button"},a.createElement("i",{style:{marginLeft:"50%",marginRight:"50%",width:"5rem",height:"5rem",padding:"4px",background:"green",borderRadius:"50%"}},"s")):null,"recording"===n?a.createElement("button",{style:{zIndex:"20",position:"absolute",bottom:"0",color:"red",borderRadius:"50%",width:"3rem",height:"3rem",background:"transparent",border:"2px solid red",marginLeft:"50%",marginRight:"50%"},onClick:()=>{d(!1),o("inactive"),p.current.stop(),p.current.onstop=()=>{const e=new Blob(i,{type:t}),r=URL.createObjectURL(e);u(r),l([])}},type:"button"},a.createElement("i",{style:{marginLeft:"50%",marginRight:"50%",width:"5rem",height:"5rem",padding:"4px",background:"green",borderRadius:"50%"}},"p")):null,"inactive"===n&&a.createElement("button",{style:{position:"absolute",zIndex:"20",top:"0",right:"0"},type:"button",onClick:async()=>{s&&s.getTracks().forEach((e=>e.stop()));g("user"===b?"environment":"user"),await getCameraPermission()}}," switchcam ")):null,!c&&m?a.createElement("div",{className:"video-player"},a.createElement("video",{className:"recorded-player",src:m,controls:!0,autoPlay:!0}),a.createElement("a",{download:!0,href:m},"Download Recording")):null))}}}]);
//# sourceMappingURL=component---src-pages-news-video-recorder-js-952a8a3b2352ccf617ca.js.map