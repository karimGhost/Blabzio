"use strict";(self.webpackChunkblabzio=self.webpackChunkblabzio||[]).push([[5691],{6109:function(e,t,r){r.r(t);var a=r(5785),n=r(7294);t.default=()=>{const e="video/webm",{0:t,1:r}=(0,n.useState)(!1),i=(0,n.useRef)(null),o=(0,n.useRef)(null),{0:l,1:s}=(0,n.useState)("inactive"),{0:c,1:d}=(0,n.useState)(null),{0:u,1:m}=(0,n.useState)([]),{0:g,1:p}=(0,n.useState)(null),{0:b,1:h}=(0,n.useState)("user"),y=async()=>{if(p(null),"MediaRecorder"in window)try{const e={audio:!0,video:{facingMode:b}},t={audio:!0},n=(await navigator.mediaDevices.getUserMedia(t),await navigator.mediaDevices.getUserMedia(e));r(!0);const i=new MediaStream((0,a.Z)(n.getVideoTracks()));d(i)}catch(e){alert(e.message)}else alert("The MediaRecorder API is not supported in your browser.")};(0,n.useEffect)((()=>{t&&o.current&&c&&(o.current.srcObject=c)}),[t,c]);return n.createElement("div",null,n.createElement("main",null,n.createElement("div",{className:"video-controls"},t?null:n.createElement("button",{onClick:y,type:"button"},"open camera")),t&&o?n.createElement("div",{style:{position:"relative"},className:"video-player"},"recording"===l&&n.createElement("span",{style:{color:"red"}}," ",n.createElement("ul",null,n.createElement("li",{style:{color:"red",position:"absolute",zIndex:"20"},className:"recordmode"},l))),n.createElement("video",{className:"live-player",ref:o,autoPlay:!0,playsInline:!0}),t&&"inactive"===l?n.createElement("button",{style:{zIndex:"20",position:"absolute",bottom:"0",color:"red",borderRadius:"50%",width:"4.5rem",height:"4.5rem",background:"transparent",border:"2px solid green",marginLeft:"20%",marginRight:"20%"},onClick:async()=>{s("recording");const t=new MediaRecorder(c,{mimeType:e});i.current=t,i.current.start();let r=[];i.current.ondataavailable=e=>{void 0!==e.data&&0!==e.data.size&&r.push(e.data)},m(r)},type:"button"},n.createElement("i",{style:{marginLeft:"20%",marginRight:"20%",width:"4rem",height:"4rem",padding:"4px",background:"green",borderRadius:"50%"}},"s")):null,"recording"===l?n.createElement("button",{style:{zIndex:"20",position:"absolute",bottom:"0",color:"red",borderRadius:"50%",width:"4rem",height:"4rem",background:"transparent",border:"2px solid red",marginLeft:"20%",marginRight:"20%"},onClick:()=>{r(!1),s("inactive"),i.current.stop(),i.current.onstop=()=>{const t=new Blob(u,{type:e}),r=URL.createObjectURL(t);p(r),m([])}},type:"button"},n.createElement("i",{style:{marginLeft:"20%",marginRight:"20%",width:"3.8rem",height:"3.8rem",padding:"4px",background:"green",borderRadius:"50%"}},"p")):null,"inactive"===l&&n.createElement("button",{style:{position:"absolute",zIndex:"20",top:"0",right:"0"},type:"button",onClick:async()=>{c&&c.getTracks().forEach((e=>e.stop()));h("user"===b?"environment":"user"),await y()}}," switchcam ")):null,!t&&g?n.createElement("div",{className:"video-player"},n.createElement("video",{className:"recorded-player",src:g,controls:!0,autoPlay:!0}),n.createElement("a",{download:!0,href:g},"Download Recording")):null))}}}]);
//# sourceMappingURL=component---src-pages-news-video-recorder-js-e3fdcfb94f3cb23b39c7.js.map