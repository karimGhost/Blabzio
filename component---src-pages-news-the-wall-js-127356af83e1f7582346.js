"use strict";(self.webpackChunkblabzio=self.webpackChunkblabzio||[]).push([[1476],{3328:function(e,t,n){n.r(t),n.d(t,{Head:function(){return m},default:function(){return c}});var a=n(5785),s=n(7294),r=n(4127),l=n(6109),o=(n(1405),n(4473)),i=(n(4405),n(3869));function c(){const{0:e,1:t}=(0,s.useState)(null),n=(0,s.useRef)(null),{0:c,1:m}=(0,s.useState)([]),{0:u,1:d}=(0,s.useState)(!1),{0:p,1:f}=(0,s.useState)(null),g=(0,s.useRef)(null),{0:h,1:v}=(0,s.useState)(!1),{0:E,1:y}=(0,s.useState)("user");(0,s.useEffect)((()=>{console.log("these are the recorded videos ",c)}),[c]);const b=async()=>{if(f(null),"MediaRecorder"in window)try{const e={audio:!0,video:{facingMode:E}},n={audio:!0},s=await navigator.mediaDevices.getUserMedia(n),r=await navigator.mediaDevices.getUserMedia(e);d(!0);const l=new MediaStream([].concat((0,a.Z)(s.getAudioTracks()),(0,a.Z)(r.getVideoTracks())));t(l),v(!0)}catch(e){alert(e.message)}else alert("The MediaRecorder API is not supported in your browser."),v(!1)};(0,s.useEffect)((()=>{u&&n.current&&e&&(n.current.srcObject=e)}),[u,e]);const{0:N,1:k}=(0,s.useState)(i.Z),{0:x,1:R}=(0,s.useState)("");return s.createElement("main",{className:h&&"boxmain",style:{marginTop:"150px"}},s.createElement(o.Z,{setImg:k,setUser:R}),s.createElement("button",{onClick:b,style:{position:"fixed",top:"110px",zIndex:"5",margin:"0 20%",left:"0",right:"0",borderRadius:"15px"}},"Record Video +"),h&&s.createElement("div",{style:{zIndex:"50",height:"100vh",width:"100vw",position:"absolute",top:"0",bottom:"0",left:"0",right:"0",background:"white"}},s.createElement(l.default,{setShowVid:v,recordedVideos:c,setRecordedVideos:m,getCameraPermission:b,stream:e,setStream:t,showVid:h,permission:u,setPermission:d,recordedVideo:p,setRecordedVideo:f,mediaRecorder:g,facingMode:E,setFacingMode:y,liveVideoFeed:n,stopCameraStream:()=>{e&&(e.getTracks().forEach((e=>e.stop())),t(null),d(!1),v(!1))}})),c&&c.reverse().map((e=>s.createElement("div",{key:e.id,className:"mtop"},s.createElement(r.default,{videoplay:e.recordedVideo&&e.recordedVideo,user:e.user&&e.user,setRecordedVideo:m,likes:e.likes,shares:e.shares,comments:e.comments,id:e.id,recordedVideos:c,setImg:k,setUser:R,Image:N,Useris:x})))))}const m=()=>s.createElement("title",null,"TheWall")},6109:function(e,t,n){n.r(t);var a=n(5785),s=n(7294),r=n(4405),l=n(3416);t.default=e=>{const t="video/webm",{user:n}=(0,r.a)(),{0:o,1:i}=(0,s.useState)("inactive"),{0:c,1:m}=(0,s.useState)([]),u=e.facingMode,d=e.setFacingMode,p=e.stream,f=e.setStream,g=e.liveVideoFeed,h=e.permission,v=e.setPermission,E=e.recordedVideo,y=e.setRecordedVideo,b=e.mediaRecorder;(0,s.useEffect)((()=>{h&&g.current&&p&&(g.current.srcObject=p)}),[h,p]);e.recordedVideos;const N=e.setRecordedVideos;return s.createElement("div",null,s.createElement("main",{className:e.showVid&&" boxmain"},s.createElement("div",{className:"video-controls"}),h&&g?s.createElement("div",{style:{position:"relative"},className:"video-player"},"recording"===o&&s.createElement("span",{style:{color:"red"}}," ",s.createElement("ul",null,s.createElement("li",{style:{color:"red",position:"absolute",zIndex:"20"},className:"recordmode"},o))),s.createElement("video",{className:"live-player  m-50",ref:g,autoPlay:!0,playsInline:!0}),h&&"inactive"===o?s.createElement("button",{style:{zIndex:"20",position:"absolute",bottom:"40px",left:"50%",transform:"translateX(-50%)",background:"transparent",border:"2px solid green",borderRadius:"50%",width:"3rem",height:"3rem"},onClick:async()=>{i("recording");const e=new MediaRecorder(p,{mimeType:t});b.current=e,b.current.start();let n=[];b.current.ondataavailable=e=>{void 0!==e.data&&0!==e.data.size&&n.push(e.data)},m(n)},type:"button"},s.createElement("i",{style:{display:"block",width:"2rem",height:"2rem",padding:"4px",background:"red",borderRadius:"50%",margin:"1px auto"}},"s")):null,"recording"===o?s.createElement("button",{style:{zIndex:"20",position:"absolute",bottom:"40px",left:"50%",transform:"translateX(-50%)",background:"transparent",border:"2px solid red",borderRadius:"50%",width:"3rem",height:"3rem"},onClick:()=>{v(!1),i("inactive"),b.current.stop(),b.current.onstop=()=>{const e=new Blob(c,{type:t}),n=URL.createObjectURL(e);y(n),m([])}},type:"button"},s.createElement("i",{style:{display:"block",width:"2rem",height:"2rem",padding:"4px",background:"green",borderRadius:"50%",margin:"1px auto"}},"p")):null,"inactive"===o&&s.createElement("button",{style:{position:"absolute",zIndex:"20",top:"0",right:"0"},type:"button",onClick:async()=>{p&&p.getTracks().forEach((e=>e.stop()));d("user"===u?"environment":"user"),await getCameraPermission()}}," switchcam ")):null,!h&&E?s.createElement("div",{className:"video-player"},s.createElement("video",{className:"recorded-player",src:E,controls:!0,autoPlay:!0}),s.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",width:"100%"}},s.createElement("button",{onClick:()=>{const t={user:n.uid,id:(0,l.x0)(),recordedVideo:E,likes:"",shares:"",comments:[]};N((e=>[].concat((0,a.Z)(e),[t]))),y([]),e.stopCameraStream(),e.setShowVid(!1),f(null)}},"post Video"),s.createElement("button",{onClick:e.getCameraPermission},"retake video"))):null))}},4127:function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var a=n(5785),s=n(7294),r=n(3416),l=(n.p,n(4854)),o=n(1001),i=n(2552),c=n(4405);var m=function(e){const{user:t}=(0,c.a)(),n=(e.setImg,e.setUser,e.videoplay),{0:m,1:u}=(0,s.useState)(""),d=(0,s.useRef)(null),p=(0,s.useRef)(null),f=(0,s.useRef)(null),g=(0,s.useRef)(null),h=(0,s.useRef)(null),v=((0,s.useRef)(null),(0,s.useRef)(null)),E=(0,s.useRef)(null),y=(0,s.useRef)(null),b=(0,s.useRef)(null),N=(0,s.useRef)(null),k=(0,s.useRef)(null),x=(0,s.useRef)(null),R=e.setRecordedVideo,{0:w,1:C}=(0,s.useState)(null);(0,s.useEffect)((()=>(O(),C(null===w),d.current.addEventListener("timeupdate",z),()=>{d.current.removeEventListener("timeupdate",z)})),[]);const V=e.Image,I=e.Useris,S=e=>{const t=Math.floor(e/60);let n=Math.floor(e%60);return n=n<=9?"0"+n:n,t+":"+n},z=()=>{d.current&&p.current&&f.current&&(p.current.style.width=d.current.currentTime/d.current.duration*100+"%",f.current&&f.current.textContent&&(f.current.textContent=S(d.current.currentTime)+" : "+S(d.current.duration)))},{0:P,1:M}=(0,s.useState)([]),O=()=>{M(e.comments)},T=(0,s.useRef)(null),{0:F,1:U}=(0,s.useState)({userName:I,timePosted:"2hrs ago",profilePhoto:V,comment:"",userid:t?t.uid:"",id:(0,r.x0)()}),{0:B,1:K}=(0,s.useState)(!0),{0:j,1:D}=(0,s.useState)(!1);return s.createElement("div",null,s.createElement("div",{style:{background:T.current?"black":"white"},className:"ConBod "},s.createElement("div",{className:"containered"},w&&s.createElement("div",{className:"overlay",ref:E},s.createElement("div",{className:"howto"},s.createElement("div",{className:"explain"},s.createElement("ul",{className:"explain-list"},s.createElement("li",{className:"explain-details"},s.createElement("h2",{className:"explain-details-head"},"Likes"),s.createElement("span",{className:"icocolor explain-details-desc"},"Click the ",s.createElement("span",{className:"icon"},s.createElement("img",{src:"https://assets.codepen.io/2629920/heart.png",alt:""}))," to set a like on the video.")),s.createElement("li",{className:"explain-details"},s.createElement("h2",{className:"explain-details-head"},"Comments"),s.createElement("span",{className:"explain-details-desc icocolor"},"Click the ",s.createElement("span",{className:"icon"},s.createElement("img",{src:"https://assets.codepen.io/2629920/chat.png",alt:""})),"view comments."))),s.createElement("div",{className:"explain-video"},s.createElement("h2",{className:"explain-details-head explain-video"},"Video"),s.createElement("div",{className:"explain-video-bar"},s.createElement("div",{className:"explain-video-bar-w"})),s.createElement("span",{className:"explain-details-desc icocolor"},"Click through the video to navigate to a specific timeline."))),s.createElement("button",{onClick:function(){C(!1)},className:"howto-close",ref:y},"Got it"))),s.createElement("div",{className:"comments-container",style:{zIndex:"4"},ref:b},s.createElement("div",{className:"comments-head"},s.createElement("span",{className:"comments-head-label",ref:h}),s.createElement("span",{onClick:()=>{d.current.pause&&(b.current.classList.remove("comments-active"),d.current.play(),d.current.style.cursor="default")},className:"comments-head-close",ref:N},"âœ•")),s.createElement("div",{className:"comments-list"},s.createElement("span",{ref:h},"Comments: ",e.comments&&e.comments.length),s.createElement("div",{ref:v},e.comments&&e.comments.reverse().map((e=>s.createElement("div",{key:e.id,className:"comments-item"},s.createElement("span",{className:"comment-top"},s.createElement("span",{className:"comment-top-logo",style:{backgroundImage:"url("+e.profilePhoto+")"}}),s.createElement("span",{className:"comment-top-details"},s.createElement("div",{style:{display:"flex",flexDirection:"column"}},s.createElement("span",{className:"user-name"},e.userName&&e.userName)),s.createElement("span",{style:{fontSize:"0.80rem"},className:"user-time "},e.timePosted&&e.timePosted),s.createElement("span",{className:"user-comment"},e.comment&&e.comment)))))))),s.createElement("div",{style:{position:"relative",height:"fit-content",width:"fit-content"}},s.createElement(i.g,{style:{width:"100%"},value:F.comment,onChange:e=>U((t=>({...t,comment:e.target.value}))),rows:3,cols:70}),s.createElement("button",{onClick:()=>{return t=e.id,R((e=>e.map((e=>e.id===t?{...e,comments:[].concat((0,a.Z)(e.comments),[F])}:e)))),console.log("values as is ",e.recordedVideos),void U((e=>({...e,comment:""})));var t},style:{position:"absolute",bottom:"0",right:"0"}},"comment"))),s.createElement("video",{src:n,className:"video",style:{position:"relative"},playsInline:!0,loop:!0,onClick:()=>{d.current&&(B?d.current.pause():d.current.play(),K(!B))},ref:d}," ",s.createElement("i",{onMouseOver:()=>D(!0),onMouseLeave:()=>D(!1),className:"pi pi-caret-right over ",style:{display:j?"auto":"none ",zIndex:"5",fontSize:"2.5rem",position:"absolute"}})),s.createElement("div",{className:"icons"},s.createElement("div",{className:"right"},s.createElement("div",{onClick:()=>{return n=e.id,void R((e=>e.map((e=>{if(e.id===n){const n=(0,a.Z)(e.likes);if(n.includes(t.uid)){const a=n.filter((e=>e!==t.uid));return x.current&&(x.current.src="https://assets.codepen.io/2629920/heart.png"),{...e,likes:a}}return x.current.src="https://assets.codepen.io/2629920/heart+%281%29.png",{...e,likes:[].concat((0,a.Z)(n),[t.uid])}}return e}))));var n},className:"icons-item right-icon"},s.createElement("span",{className:"icon"},s.createElement("img",{src:"https://assets.codepen.io/2629920/heart.png",alt:"",id:"likes-icon",ref:x})),s.createElement("span",{className:"icon-label likes right-label","data-likes":e.likes&&e.likes.length,ref:k},e.likes&&e.likes.length)),s.createElement("div",{onClick:()=>{b.current.classList.add("comments-active"),d.current.pause(),d.current.pause&&(d.current.style.cursor="pointer")},className:"icons-item right-icon"},s.createElement("span",{className:"icon"},s.createElement("img",{src:"https://assets.codepen.io/2629920/chat.png",alt:"",id:"comments-icon"})),s.createElement("span",{className:"icon-label comments right-label"},e.comments&&e.comments.length)),s.createElement("div",{className:"icons-item right-icon"},s.createElement("span",{className:"icon"},s.createElement("img",{src:"https://assets.codepen.io/2629920/share.png",alt:""})),s.createElement("span",{className:"icon-label shares right-label"},"4"))),s.createElement("div",{className:"bottom"},s.createElement("span",{className:"progress-duration",ref:f}),s.createElement("div",{className:"progress-range",title:"seek",ref:g,onClick:e=>{const t=e.nativeEvent.offsetX/g.current.offsetWidth;d.current.currentTime=t*d.current.duration}},s.createElement("div",{className:"progress-bar",ref:p})),s.createElement("div",{onClick:()=>(0,l.navigate)("/profileComponents/Myprofile"),className:"icons-item"},s.createElement("span",{className:"icon"},s.createElement(o.q,{image:V&&V,className:"flex align-items-center bg-transparent  justify-content-center mr-2",size:"large",shape:"circle"})),s.createElement("span",{className:"icon-label"},I&&I)))))),s.createElement("div",{style:{display:"flex"}},s.createElement("span",{className:"icon"},s.createElement(o.q,{image:V&&V,className:"flex align-items-center bg-transparent  justify-content-center mr-2",size:"large",shape:"circle"})),s.createElement("h2",null,"Title")))}},2552:function(e,t,n){n.d(t,{g:function(){return u}});var a=n(7294),s=n(411),r=n(7074),l=n(3643),o=n(3652),i=n(6367);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c.apply(this,arguments)}var m=o.V.extend({defaultProps:{__TYPE:"InputTextarea",autoResize:!1,keyfilter:null,onBlur:null,onFocus:null,onBeforeInput:null,onInput:null,onKeyDown:null,onKeyUp:null,onPaste:null,tooltip:null,tooltipOptions:null,validateOnly:!1,children:void 0}}),u=a.memo(a.forwardRef((function(e,t){var n=a.useContext(i.Ou),o=m.getProps(e,n),u=a.useRef(t),d=a.useRef(0),p=m.setMetaData({props:o}).ptm,f=function(e){var t=u.current;t&&l.p7.isVisible(t)&&(d.current||(d.current=t.scrollHeight,t.style.overflow="hidden"),(d.current!==t.scrollHeight||e)&&(t.style.height="",t.style.height=t.scrollHeight+"px",parseFloat(t.style.height)>=parseFloat(t.style.maxHeight)?(t.style.overflowY="scroll",t.style.height=t.style.maxHeight):t.style.overflow="hidden",d.current=t.scrollHeight))};a.useEffect((function(){l.gb.combinedRefs(u,t)}),[u,t]),a.useEffect((function(){o.autoResize&&f(!0)}),[o.autoResize]);var g=a.useMemo((function(){return l.gb.isNotEmpty(o.value)||l.gb.isNotEmpty(o.defaultValue)}),[o.value,o.defaultValue]),h=l.gb.isNotEmpty(o.tooltip),v=(0,l.AK)("p-inputtextarea p-inputtext p-component",{"p-disabled":o.disabled,"p-filled":g,"p-inputtextarea-resizable":o.autoResize},o.className),E=(0,l.dG)({ref:u,className:v,onFocus:function(e){o.autoResize&&f(),o.onFocus&&o.onFocus(e)},onBlur:function(e){o.autoResize&&f(),o.onBlur&&o.onBlur(e)},onKeyUp:function(e){o.autoResize&&f(),o.onKeyUp&&o.onKeyUp(e)},onKeyDown:function(e){o.onKeyDown&&o.onKeyDown(e),o.keyfilter&&s.F.onKeyPress(e,o.keyfilter,o.validateOnly)},onBeforeInput:function(e){o.onBeforeInput&&o.onBeforeInput(e),o.keyfilter&&s.F.onBeforeInput(e,o.keyfilter,o.validateOnly)},onInput:function(e){var t=e.target;o.autoResize&&f(l.gb.isEmpty(t.value)),o.onInput&&o.onInput(e),l.gb.isNotEmpty(t.value)?l.p7.addClass(t,"p-filled"):l.p7.removeClass(t,"p-filled")},onPaste:function(e){o.onPaste&&o.onPaste(e),o.keyfilter&&s.F.onPaste(e,o.keyfilter,o.validateOnly)}},m.getOtherProps(o),p("root"));return a.createElement(a.Fragment,null,a.createElement("textarea",E),h&&a.createElement(r.u,c({target:u,content:o.tooltip},o.tooltipOptions,{pt:p("tooltip")})))})));u.displayName="InputTextarea"}}]);
//# sourceMappingURL=component---src-pages-news-the-wall-js-127356af83e1f7582346.js.map