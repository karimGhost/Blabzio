"use strict";(self.webpackChunkblabzio=self.webpackChunkblabzio||[]).push([[3630],{7464:function(e,t,a){a.r(t);var r=a(7294),n=a(4866),l=a(4405),o=a(9403),c=a(4854);const s={apiKey:"AIzaSyAM5p7O6YuAvCxfDCbR48Duz019qkoVp0Y",authDomain:"itsmynodezena.firebaseapp.com",databaseURL:"https://itsmynodezena-default-rtdb.firebaseio.com",projectId:"itsmynodezena",storageBucket:"itsmynodezena.appspot.com",messagingSenderId:"299392955521",appId:"1:299392955521:web:ef5671ad2702d441304980"},i={apiKey:"AIzaSyA4-6Spjqf7Z_ks7fak2jnGKqtJG4uRqMk",authDomain:"zenahubglob.firebaseapp.com",databaseURL:"https://zenahubglob-default-rtdb.firebaseio.com",projectId:"zenahubglob",storageBucket:"zenahubglob.appspot.com",messagingSenderId:"414119474155",appId:"1:414119474155:web:d93f733443172ecd739fae",measurementId:"G-B65PR7NNXS"};t.default=function(e){let{toastRef:t}=e;n.Z.initializeApp(s,"app0155"),n.Z.initializeApp(i,"app01922");const{user:a,setUser:u,signOut:d}=(0,l.a)(),m=n.Z.app("app0155"),p=n.Z.app("app01922"),{0:f,1:y}=(0,r.useState)(!1),{0:b,1:h}=(0,r.useState)(null),v=async e=>{try{const t=p.database().ref("comments/cards"),a=await t.orderByChild("userId").equalTo(e).once("value"),r={};a.forEach((e=>{r[e.key]=null})),await t.update(r)}catch(t){console.error("Error deleting user data:",t)}},g=async e=>{try{const t=m.database().ref("profile"),a=await t.once("value"),r={};a.forEach((t=>{t.key===e&&(r[t.key]=null)})),await t.update(r)}catch(t){console.error("Error deleting user data:",t)}};return r.createElement(r.Fragment,null,r.createElement(o.z,{style:{backgroundColor:"red",outline:"red"},severity:"danger",label:"I understand, delete my account",onClick:async()=>{if(a){y(!0);try{const e=a.uid;await a.delete(),await d(),(0,c.navigate)("/"),t.current.show({severity:"success",summary:"Account deleted",detail:"Your account has been successfully deleted."}),await v(e),await g(e)}catch(e){"auth/requires-recent-login"===e.code?(await d(),t.current.show({severity:"warn",summary:"Session expired",detail:"You need to sign in again to delete your account."})):t.current.show({severity:"error",summary:"Error deleting account",detail:e.message})}finally{y(!1)}}},disabled:f}))}},6550:function(e,t,a){a.r(t),a.d(t,{Head:function(){return D},default:function(){return A}});a(4854);var r=a(7294),n=a(4866),l=a(4405),o=(a(6267),a(3869)),c=a(7043),s=a(3367),i=a(4420),u=a(424),d=a(3308),m=a(7074),p=a(3643),f=a(3652),y=a(6367);function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},b.apply(this,arguments)}function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function v(e){var t=function(e,t){if("object"!==h(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!==h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===h(t)?t:String(t)}function g(e,t,a){return(t=v(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,n,l,o,c=[],s=!0,i=!1;try{if(l=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;s=!1}else for(;!(s=(r=l.call(a)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(u){i=!0,n=u}finally{try{if(!s&&null!=a.return&&(o=a.return(),Object(o)!==o))return}finally{if(i)throw n}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?E(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var w=f.V.extend({defaultProps:{__TYPE:"RadioButton",autoFocus:!1,checked:!1,className:null,disabled:!1,id:null,inputId:null,inputRef:null,name:null,onChange:null,onClick:null,required:!1,style:null,tabIndex:null,tooltip:null,tooltipOptions:null,value:null,children:void 0}});function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var S=r.memo(r.forwardRef((function(e,t){var a=r.useContext(y.Ou),n=w.getProps(e,a),l=k(r.useState(!1),2),o=l[0],c=l[1],s=r.useRef(null),i=r.useRef(n.inputRef),u=w.setMetaData({props:n,state:{focused:o}}).ptm,f=function(e){h(e)},h=function(e){if(!n.disabled&&(n.onChange||n.onClick)){var t=n.checked,a=e.target instanceof HTMLDivElement,r=e.target===i.current&&e.target.checked!==t,l=a&&p.p7.hasClass(s.current,"p-radiobutton-checked")===t&&!t;if(r||l){var o=!t,c={originalEvent:e,value:n.value,checked:o,stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},target:{type:"radio",name:n.name,id:n.id,value:n.value,checked:o}};if(n.onClick&&n.onClick(c),e.defaultPrevented)return;n.onChange&&n.onChange(c),l&&(i.current.checked=o)}p.p7.focus(i.current),e.preventDefault()}};r.useEffect((function(){i.current&&(i.current.checked=n.checked)}),[n.checked]),r.useEffect((function(){p.gb.combinedRefs(i,n.inputRef)}),[i,n.inputRef]),(0,d.nw)((function(){n.autoFocus&&p.p7.focus(i.current,n.autoFocus)})),r.useImperativeHandle(t,(function(){return{props:n,select:f,focus:function(){return p.p7.focus(i.current)},getElement:function(){return s.current},getInput:function(){return i.current}}}));var v=p.gb.isNotEmpty(n.tooltip),E=w.getOtherProps(n),S=p.gb.reduceKeys(E,p.p7.ARIA_PROPS),P=(0,p.AK)("p-radiobutton p-component",{"p-radiobutton-checked":n.checked,"p-radiobutton-disabled":n.disabled,"p-radiobutton-focused":o},n.className),C=(0,p.AK)("p-radiobutton-box",{"p-highlight":n.checked,"p-disabled":n.disabled,"p-focus":o}),O=(0,p.dG)({ref:s,id:n.id,className:P,style:n.style,onClick:h},w.getOtherProps(n),u("root")),I=(0,p.dG)({className:"p-hidden-accessible"},u("hiddenInputWrapper")),j=(0,p.dG)(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){g(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({ref:i,id:n.inputId,type:"radio",name:n.name,defaultChecked:n.checked,onFocus:function(){c(!0)},onBlur:function(){c(!1)},onKeyDown:function(e){"Space"!==e.code&&" "!==e.key||h(e)},disabled:n.disabled,required:n.required,tabIndex:n.tabIndex},S),u("hiddenInput")),A=(0,p.dG)({className:C},u("input")),D=(0,p.dG)({className:"p-radiobutton-icon"},u("icon"));return r.createElement(r.Fragment,null,r.createElement("div",O,r.createElement("div",I,r.createElement("input",j)),r.createElement("div",A,r.createElement("div",D))),v&&r.createElement(m.u,b({target:s,content:n.tooltip},n.tooltipOptions,{pt:u("tooltip")})))})));S.displayName="RadioButton";var P=a(4871),C=a(7464),O=(a(9755),f.V.extend({defaultProps:{__TYPE:"ProgressSpinner",id:null,style:null,className:null,strokeWidth:"2",fill:"none",animationDuration:"2s",children:void 0}})),I=r.memo(r.forwardRef((function(e,t){var a=r.useContext(y.Ou),n=O.getProps(e,a),l=r.useRef(null),o=(0,p.AK)("p-progress-spinner",n.className),c=O.setMetaData({props:n}).ptm;r.useImperativeHandle(t,(function(){return{props:n,getElement:function(){return l.current}}}));var s=(0,p.dG)({id:n.id,ref:l,style:n.style,className:o,role:"alert","aria-busy":!0},c("spinner")),i=(0,p.dG)({className:"p-progress-spinner-svg",viewBox:"25 25 50 50",style:{animationDuration:n.animationDuration}},c("spinner")),u=(0,p.dG)({className:"p-progress-spinner-circle",cx:"50",cy:"50",r:"20",fill:n.fill,strokeWidth:n.strokeWidth,strokeMiterlimit:"10"},c("circle"));return r.createElement("div",s,r.createElement("svg",i,r.createElement("circle",u)))})));I.displayName="ProgressSpinner";const j={apiKey:"AIzaSyAM5p7O6YuAvCxfDCbR48Duz019qkoVp0Y",authDomain:"itsmynodezena.firebaseapp.com",databaseURL:"https://itsmynodezena-default-rtdb.firebaseio.com",projectId:"itsmynodezena",storageBucket:"itsmynodezena.appspot.com",messagingSenderId:"299392955521",appId:"1:299392955521:web:ef5671ad2702d441304980"};function A(){const{user:e,setUser:t,loading:a,signOut:d}=(0,l.a)();n.Z.initializeApp(j,"app011");const m=(0,r.useRef)(null),{0:p,1:f}=(0,r.useState)(!1),y=n.Z.app("app011"),{0:b,1:h}=(y.database(),(0,r.useState)("")),{0:v,1:g}=(0,r.useState)([]),{0:E,1:k}=(0,r.useState)(o.Z),{0:w,1:N}=(0,r.useState)(""),{0:O,1:A}=(0,r.useState)(""),{0:D,1:R}=(0,r.useState)("");const{0:x,1:z}=(0,r.useState)(null),{0:F,1:B}=(0,r.useState)(null),{0:M,1:W}=(0,r.useState)(null),{0:q,1:G}=(0,r.useState)(551234567);async function T(){if(e&&e.uid){const a=y.database().ref("profile/"+e.uid);try{await a.update({isprivate:x||!1,crashreport:F||!0,twofactors:M||!1,sms:q||"+"})}catch(t){console.log(t),m.current.show({severity:"error",summary:"Error",detail:"Error: "+t.message,life:9e3})}}}const{0:K,1:Y}=(0,r.useState)(!1);(0,r.useEffect)((()=>{e&&e.email&&y.database().ref("profile").orderByChild("email").equalTo(e.email).once("value").then((e=>{if(e.exists()){const t=Object.keys(e.val()),a=e.val()[t];a.darkmode&&Y(a.darkmode),z(a.isprivate),B(a.crashreport),W(a.twofactors),G((null==a?void 0:a.sms)||0)}f(!0)})).catch((e=>{console.log(e),m.current.show({severity:"error",summary:"Error",detail:"Error: "+e.message,life:3e3})}))}),[e]),(0,r.useEffect)((()=>{T()}),[x]),(0,r.useEffect)((()=>{T()}),[F]),(0,r.useEffect)((()=>{T()}),[M]);return p?r.createElement("div",{className:""+(K&&"darken")},r.createElement(i.F,{ref:m}),r.createElement("div",{className:(K&&"darken")+"container-xl px-4 mt-4 "},r.createElement(c.default,{setDarks:Y}),r.createElement("div",{className:"row"},r.createElement("div",{className:"col-lg-8"},r.createElement("div",{className:"card mb-4",style:{background:K&&"#141515"}},r.createElement("div",{className:"card-header",style:{color:"red"}},"Change Password"),r.createElement("div",{className:"card-body"},r.createElement(r.Fragment,null,r.createElement("div",{className:"mb-3"},r.createElement("label",{className:"small mb-1",htmlFor:"form1"}),r.createElement(s.r,{feedback:!1,className:"pass mb-4  center",id:"form1",value:w,onChange:e=>{N((t=>e.target.value))},placeholder:"Enter current password",toggleMask:!0})),r.createElement("div",{className:"mb-3"},r.createElement("label",{className:"small mb-1",htmlFor:"form2"}),r.createElement(s.r,{className:"pass mb-4  center",id:"form2",value:O,onChange:e=>{A((t=>e.target.value))},placeholder:"New Password",toggleMask:!0})),r.createElement("div",{className:"mb-3"},r.createElement("label",{className:"small mb-1",htmlFor:"form3"}),r.createElement(s.r,{className:"pass mb-4  center",id:"form3",value:D,onChange:e=>{R((t=>e.target.value))},placeholder:"Confirm Password",toggleMask:!0})),r.createElement("button",{onClick:()=>{(0,u.V)({message:"Do you want to proceed ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:()=>(()=>{y.auth();const t=n.Z.auth.EmailAuthProvider.credential(e.email,w);D===O?e.reauthenticateWithCredential(t).then((()=>{e.updatePassword(O).then((()=>{m.current.show({severity:"success",summary:"Success",detail:"you have succesfully changed your password",life:4e3})})).catch((e=>{m.current.show({severity:"error",summary:"incorrect",detail:"An error occured check current password and try again",life:4e3})}))})).catch((e=>{m.current.show({severity:"error",summary:"incorrect",detail:"password change rejected. please check current password",life:4e3})})):m.current.show({severity:"warn",summary:"Warning password missmatch",detail:"please check  passwords does not match",life:6e3})})(),reject:()=>{m.current.show({severity:"warn",summary:"Rejected",detail:"you canceled",life:3e3})}})},className:"btn btn-primary",type:"button"},"change password"),r.createElement(u.Q,null)))),r.createElement("div",{className:"card mb-4",style:{background:K&&"#141515"}},r.createElement("div",{className:"card-header",style:{color:K&&"silver",fontWeight:"bold"}},"Security Preferences ",F),r.createElement("div",{className:"card-body"},r.createElement("h5",{className:"mb-1",style:{color:"orange",fontWeight:"bold"}},"Account Privacy"),r.createElement("p",{className:"smal text-muted mb-3 papol"},"By setting your account to private, your profile information and posts will not be visible to users outside of your user groups."),r.createElement(r.Fragment,null,r.createElement("div",{className:"form-check mb-4"},r.createElement(S,{inputId:"public",value:!0,className:"mr-1 ",id:"radioPrivacy1",type:"radio",name:"radioPrivacy",onChange:e=>z(e.target.value),checked:!0===x}),r.createElement("label",{htmlFor:"radioPrivacy1",style:{color:K&&"silver"},className:"form-check-label mb-3"},"Public (posts are available to all users)")),r.createElement("div",{className:"form-check"},r.createElement(S,{inputId:"public1",value:!1,className:"mr-1 ",id:"radioPrivacy1",type:"radio",name:"radioPrivacy1",onChange:e=>z(e.target.value),checked:!1===x}),r.createElement("label",{htmlFor:"public1",style:{color:K&&"silver"},className:"form-check-label mb-4",for:"radioPrivacy2"},"Private (posts are available to only users in your groups)"))),r.createElement("hr",{className:"my-6 mt-3"}),r.createElement("h5",{className:"mb-1",style:{color:"orange",fontWeight:"bold"}},"Data Sharing"),r.createElement("p",{className:"small text-muted mb-2 papol",style:{color:"purple"}},"Sharing usage data can help us to improve our products and better serve our users as they navigate through our application. When you agree to share usage data with us, crash reports and usage analytics will be automatically sent to our development team for investigation."),r.createElement(r.Fragment,null,r.createElement("div",{className:"form-check mb-6"},r.createElement(S,{inputId:"public1",onClick:T,value:!0,className:"mr-1 ",id:"radioPrivacy1",type:"radio",name:"radioPrivacy1",onChange:e=>B(e.target.value),checked:!0===F}),r.createElement("label",{htmlFor:"radioUsage1",className:"form-check-label",style:{color:K&&"silver"}},"Yes, share data and crash reports with app developers")),r.createElement("div",{className:"form-check mt-5"},r.createElement(S,{inputId:"public1",onClick:T,value:!1,className:"mr-1 ",id:"radioPrivacy1",type:"radio",name:"radioPrivacy1",onChange:e=>B(e.target.value),checked:!1===F}),r.createElement("label",{htmlFor:"radioUsage2",className:"form-check-label",style:{color:K&&"silver"}},"No, limit my data sharing with app developers")))))),r.createElement("div",{className:"col-lg-4"},r.createElement("div",{className:"card mb-4",style:{background:K&&"#141515"}},r.createElement("div",{className:"card-header",style:{color:"orange",fontWeight:"bold"}},"Two-Factor Authentication"),r.createElement("div",{className:"card-body"},r.createElement("p",{style:{color:"purple"}},"Add another level of security to your account by enabling two-factor authentication. We will send you a text message to verify your login attempts on unrecognized devices and browsers."),r.createElement(r.Fragment,null,r.createElement("div",{className:"form-check mb-2"},r.createElement(S,{inputId:"public1",value:!0,className:"mr-1 ",id:"radioPrivacy1",type:"radio",name:"radioPrivacy1",onChange:e=>W(e.target.value),checked:!0===M}),r.createElement("label",{htmlFor:"twoFactorOn",className:"form-check-label"},"On")),r.createElement("div",{className:"form-check mb-2"},r.createElement(S,{inputId:"public1",value:!1,className:"mr-1 ",id:"radioPrivacy1",type:"radio",name:"radioPrivacy1",onChange:e=>W(e.target.value),checked:!1===M}),r.createElement("label",{htmlFor:"twoFactorOff",className:"form-check-label"},"Off")),r.createElement("div",{className:"mt-4"},r.createElement("label",{htmlFor:"number-input",className:"small mb-1"},"SMS Number"),r.createElement(P.R,{disabled:!M,id:"number-input",value:q,onValueChange:e=>G(e.target.value)})),r.createElement("button",{className:"btn btn-dark",style:{marginTop:"10px"},onClick:()=>{m.current.show({severity:"success",summary:"Success",detail:"succesfully updated",life:6e3}),T()}},"Save changes")))),r.createElement("div",{className:"card mb-4",style:{background:K&&"#141515"}},r.createElement("div",{className:"card-header",style:{color:"red"}},"Delete Account"),r.createElement("div",{className:"card-body"},r.createElement("p",{style:{color:K&&"silver"}},"Deleting your account is a permanent action and cannot be undone. If you are sure you want to delete your account, select the button below."),r.createElement(C.default,{toastRef:m}))))))):r.createElement("div",{style:{alignItems:"center",justifyItems:"center",paddingTop:"25%"},className:"card flex justify-content-center align-content-center "+(K&&"darken")},r.createElement(I,{className:"text-dark"}," ",r.createElement("h1",{className:"text-danger"},"Blabzio ")," "))}const D=()=>r.createElement("title",null,"Security")}}]);
//# sourceMappingURL=component---src-pages-profile-page-security-js-c30c6a6a2c9a79fedb8c.js.map