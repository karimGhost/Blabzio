/*! For license information please see component---src-pages-news-the-wall-js-646c0d9fde81519db79f.js.LICENSE.txt */
"use strict";(self.webpackChunkblabzio=self.webpackChunkblabzio||[]).push([[1476],{3328:function(e,t,n){n.r(t);var a=n(4578),s=n(7294),o=n(3977),i=(n(1019),n(3416));o.default.initializeApp({});const l=o.default.database();let r=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(t=e.call.apply(e,[this].concat(a))||this).state={videoFile:null,isRecording:!1,recordedVideo:null,videos:[]},t.loadVideos=()=>{l.ref("videos").on("value",(e=>{const n=[];e.forEach((e=>{const t={id:e.key,...e.val()};n.push(t)})),t.setState({videos:n})}))},t.handleFileChange=e=>{const n=e.target.files[0];n&&n.size<5e6?t.setState({videoFile:n}):alert("Please select a short video file (less than 5MB).")},t.handleRecordClick=()=>{t.state.isRecording?(t.state.mediaRecorder.stop(),t.setState({isRecording:!1})):navigator.mediaDevices.getUserMedia({video:!0}).then((e=>{const n=new MediaRecorder(e),a=[];n.addEventListener("dataavailable",(e=>{a.push(e.data)})),n.addEventListener("stop",(()=>{const e=new Blob(a,{type:"video/webm"});t.setState({recordedVideo:e})})),n.start(),t.setState({isRecording:!0,mediaRecorder:n,recordedChunks:a})})).catch((e=>{console.error("Error accessing video stream:",e)}))},t.handleUploadClick=()=>{const{videoFile:e,recordedVideo:n}=t.state;if(e||n){const t=o.default.storage().ref().child(e?e.name:"recorded_video.webm").put(e||n);t.on("state_changed",(e=>{const t=e.bytesTransferred/e.totalBytes*100;console.log("Upload progress: "+t+"%")}),(e=>{console.error("Upload error:",e)}),(()=>{t.snapshot.ref.getDownloadURL().then((e=>{const t=(0,i.x0)();l.ref("videos/"+t).set({url:e,likes:0,dislikes:0,comments:[]})}))}))}},t.handleLike=e=>{l.ref("videos/"+e).transaction((e=>(e&&(e.likes=(e.likes||0)+1),e)))},t.handleDislike=e=>{l.ref("videos/"+e).transaction((e=>(e&&(e.dislikes=(e.dislikes||0)+1),e)))},t.handleComment=(e,t)=>{const n={id:(0,i.x0)(),text:t};l.ref("videos/"+e+"/comments").push(n)},t.handleDelete=e=>{window.confirm("Are you sure you want to delete this video?")&&l.ref("videos/"+e).remove()},t}(0,a.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.loadVideos()},n.render=function(){const{videos:e}=this.state;return s.createElement("div",{className:"container"},s.createElement("h1",null,"Video Uploader"),s.createElement("div",{className:"form-group"},s.createElement("input",{type:"file",accept:"video/*",onChange:this.handleFileChange})),s.createElement("div",{className:"form-group"},s.createElement("button",{className:"btn btn-primary",onClick:this.handleRecordClick},this.state.isRecording?"Stop Recording":"Start Recording")),s.createElement("div",{className:"form-group"},s.createElement("button",{className:"btn btn-success",onClick:this.handleUploadClick},"Upload")),s.createElement("hr",null),e.map((e=>s.createElement("div",{key:e.id,className:"card mb-3"},s.createElement("div",{className:"card-body"},s.createElement("video",{src:e.url,controls:!0,style:{width:"100%",cursor:"pointer"},onMouseEnter:e=>e.target.play(),onMouseLeave:e=>e.target.pause()}),s.createElement("div",{className:"text-muted mt-2"},"Likes: ",e.likes||0," | Dislikes: ",e.dislikes||0),s.createElement("div",{className:"my-3"},s.createElement("button",{className:"btn btn-sm btn-primary mr-2",onClick:()=>this.handleLike(e.id)},"Like"),s.createElement("button",{className:"btn btn-sm btn-danger",onClick:()=>this.handleDislike(e.id)},"Dislike")),s.createElement("div",null,s.createElement("h5",null,"Comments:"),s.createElement("ul",{className:"list-unstyled"},Object.values(e.comments||[]).map((e=>s.createElement("li",{key:e.id},e.text)))),s.createElement("div",{className:"input-group mb-3"},s.createElement("input",{type:"text",className:"form-control",placeholder:"Add a comment...","aria-label":"Add a comment","aria-describedby":"button-addon2",onChange:e=>this.setState({commentInput:e.target.value})}),s.createElement("div",{className:"input-group-append"},s.createElement("button",{className:"btn btn-outline-secondary",type:"button",id:"button-addon2",onClick:()=>this.handleComment(e.id,this.state.commentInput)},"Post")))),s.createElement("div",null,s.createElement("button",{className:"btn btn-danger btn-sm",onClick:()=>this.handleDelete(e.id)},"Delete")))))))},t}(s.Component);t.default=r},3977:function(e,t,n){(0,n(389).registerVersion)("firebase","9.22.1","app")},3416:function(e,t,n){n.d(t,{x0:function(){return a}});let a=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),"")}}]);
//# sourceMappingURL=component---src-pages-news-the-wall-js-646c0d9fde81519db79f.js.map