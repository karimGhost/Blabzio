"use strict";(self.webpackChunkblabzio=self.webpackChunkblabzio||[]).push([[9687,2979],{4063:function(e){e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,s,a;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(s=n;0!=s--;)if(!e(t[s],r[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(a=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(s=n;0!=s--;)if(!Object.prototype.hasOwnProperty.call(r,a[s]))return!1;for(s=n;0!=s--;){var o=a[s];if(!e(t[o],r[o]))return!1}return!0}return t!=t&&r!=r}},9507:function(e,t,r){r.r(t),r.d(t,{default:function(){return c}});var n=r(7294),s=(r(4866),r(4405),r(6118),r(1019),r(3869)),a=(r(5043),r(7500)),o=(r(6953),r(982)),i=r(5935),l=r(9417);function c(e){const{0:t,1:r}=(0,n.useState)(!1),c={position:t&&"absolute",top:t&&"0",left:t&&"0",right:t&&"0",bottom:t&&"0",zIndex:t&&"20",backgroundColor:t&&"rgba(0,0,0,0.11)"},d=e.message,u=e.setFullSizeImage;e.fullSizeImage;function m(e){const t=e.target;"IMG"===t.tagName&&u(t.src)}(0,n.useEffect)((()=>{document.querySelectorAll(".resizedImages").forEach((e=>(e.addEventListener("click",m),()=>{e.removeEventListener("click",m)})))}),[]);const p=function(){const e=(()=>{if(!d)return null;const e=d.split(" "),t=[];return e.forEach(((e,r)=>{if(e.startsWith("http")||e.startsWith("https")){const r=(e=>{const t=e.split(".").pop().toLowerCase();if("jpg"===t||"png"===t||"jpeg"===t||"gif"===t||"img"===t)return'<div class="p-image-preview-container card flex justify-content-center"><Image style="width: 60px" className="sized p-image-preview"   src="'+e+'" zoomSrc="'+e+'" alt="Image" id="resizedImages" class="resizedImages" width="250"   /></div>';if("mp4"===t)return'<video src="'+e+'" controls>Your browser does not support the video tag.</video>';if("mp3"===t)return'<audio src="'+e+'" controls>Your browser does not support the audio tag.</audio>';{const t=/^(https?:\/\/)?(www\.)?(youtube\.com|youtu\.be)\/(watch\?v=|embed\/|v\/)?([\w-]{11})(\S+)?$/,r=e.match(t);return r?'<div className="Fit" id="Fit" style="position: relative; padding-bottom: 56.25%; height: 300px, width: 300px"><iframe src="https://www.youtube.com/embed/'+r[5]+'?controls=0&modestbranding=1" title="YouTube video player" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>':e}})(e)||n.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"},e);t.push(r)}else e.startsWith("data:image/")?t.push('<div class="p-image-preview-container wid card flex justify-content-center"><Image className="sized" id="resizedImages" src="'+e+'" zoomSrc="'+e+'" alt="Image" class="resizedImages p-image-preview" preview width="250"  /></div>'):t.push(e+" ")})),t.join("")})(),t=e&&e.match(/<img [^>]*>/g)||[];let r=e;for(const n of t){const e=/width="(\d+)"/,t=/height="(\d+)"/,s=/src="([^"]+)"/,a=n.match(e),o=n.match(t),i=n.match(s),l=a?parseInt(a[1]):void 0,c=o?parseInt(o[1]):void 0,d=(l&&Math.floor(l/2),c&&Math.floor(c/2),'<Image src="'+(i?i[1]:"")+'" id="resizedImages" style="width:100%; max-width:300px" class="resizedImages p-image-preview p-image-mask" width="250" preview  />');r=r.replace(n,'<div class=" p-image-preview-container card flex justify-content-center imagewraper d-flex-column">'+d+"</div>")}return r}(),f="string"==typeof p?(0,i.ZP)(p,{decodeEntities:!1}):null;return n.createElement(n.Fragment,null,n.createElement("div",{className:"message my-message"},n.createElement(a.Link,{to:"profileComponents/Myprofile"},n.createElement("img",{alt:"Your Dp",height:"50",width:"50",className:" img-circle medium-image",src:e.mypic?e.mypic:s.Z})),n.createElement("div",{className:"message-body"},n.createElement("div",{className:"message-body-inner"},n.createElement("div",{className:"message-info"},n.createElement("h4",null," ",e.myuser,"  "),n.createElement("h5",null,"  ",e.hasRead&&e.hasRead>0&&n.createElement(o.G,{style:{marginRight:"5px"},icon:l.uF7})," ",e.time)),n.createElement("hr",null),n.createElement("div",{className:"message-text d-flex"},n.createElement("div",{style:t?c:{msTextOverflow:"ellipsis",whiteSpace:"pre-wrap",width:"fit-content",maxWidth:"100",wordBreak:"break-all",overflowWrap:"break-all",display:"flex",flexDirection:"column"},className:"w-100 message-text d-flex-column dflex"},f," ")))),n.createElement("br",null)))}},6099:function(e,t,r){r.r(t),r.d(t,{default:function(){return o}});var n=r(7294),s=(r(4866),r(4405),r(6118),r(1019),r(3869),r(5043),r(7500)),a=(r(6953),r(982),r(5935));function o(e){const{0:t,1:r}=(0,n.useState)(!1),o=e.setFullSizeImage,i=e.fullSizeImage;function l(e){const t=e.target;"IMG"===t.tagName&&o(t.src)}(0,n.useEffect)((()=>{document.querySelectorAll(".resizedImages").forEach((e=>(e.addEventListener("click",l),()=>{e.removeEventListener("click",l)})))}),[]);const c={position:t&&"absolute",top:t&&"0",left:t&&"0",right:t&&"0",bottom:t&&"0",zIndex:t&&"20",backgroundColor:t&&"rgba(0,0,0,0.11)"},d=e.message;const u=function(){const e=(()=>{if(!d)return null;const e=d.split(" "),t=[];return e.forEach(((e,r)=>{if(e.startsWith("http")||e.startsWith("https")){const r=(e=>{const t=e.split(".").pop().toLowerCase();if("jpg"===t||"png"===t||"jpeg"===t||"gif"===t||"img"===t)return'<div class="card p-image-preview-container flex justify-content-center"><Image className="sized resizedImages" id="resizedImages"   src="'+e+'" zoomSrc="'+e+'" alt="Image" class="resizedImages" width="250"   /></div>';if("mp4"===t)return'<video src="'+e+'" controls>Your browser does not support the video tag.</video>';if("mp3"===t)return'<audio src="'+e+'" controls>Your browser does not support the audio tag.</audio>';{const t=e.match();return t?' <div height={300}> <div className="Fit" id="Fit" style="position: relative; padding-bottom: 56.25%; height: auto, width: 50%"><iframe src="https://www.youtube.com/embed/'+t[5]+'?controls=0&modestbranding=1" title="YouTube video player" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"  allowfullscreen></iframe></div></div>':e}})(e)||n.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"},e);t.push(r)}else e.startsWith("data:image/")?t.push('<div class="p-image-preview-container wid card flex justify-content-center"><Image id="resizedImages"  className="sized resizedImages" src="'+e+'" zoomSrc="'+e+'" alt="Image" class="p-image-preview resizedImages" width="250"  /></div>'):t.push(e+" ")})),t.join("")})(),t=e&&e.match(/<img [^>]*>/g)||[];let r=e;for(const n of t){const e=/width="(\d+)"/,t=/height="(\d+)"/,s=/src="([^"]+)"/,a=n.match(e),o=n.match(t),i=n.match(s),l=a?parseInt(a[1]):void 0,c=o?parseInt(o[1]):void 0,d=(l&&Math.floor(l/2),c&&Math.floor(c/2),'<Image src="'+(i?i[1]:"")+'" id="resizedImages" style="width:100%; max-width:300px" class="resizedImages p-image-preview p-image-mask" width="250" preview  />');r=r.replace(n,'<div class=" p-image-preview-container card flex justify-content-center imagewraper d-flex-column">'+d+"</div>")}return r}(),m="string"==typeof u?(0,a.ZP)(u,{decodeEntities:!1}):null;return n.createElement(n.Fragment,null,n.createElement("div",{className:"message info "},n.createElement(s.Link,{to:"/profileComponents/Profiles/?id="+e.personid},n.createElement("img",{alt:e.named&&e.named,className:"img-circle medium-image",src:e.pic&&e.pic})),n.createElement("div",{className:"message-body "},n.createElement("div",{className:"message-info"},n.createElement("h4",null," ",e.named&&e.named," ",e.id," "),n.createElement("h5",null,"  ",e.time)),n.createElement("hr",null),n.createElement("div",{className:"message-text d-flex"},n.createElement("div",{style:t?c:{overflow:"hidden",msTextOverflow:"ellipsis",whiteSpace:"pre-wrap",width:"fit-content",maxWidth:"100",wordBreak:"break-all",overflowWrap:"break-all",display:"flex",flexDirection:"column"},className:"w-100 message-text d-flex-column dflex"},m," ")),i&&n.createElement("div",{className:"full-size-image-overlay",onClick:()=>o(null)},n.createElement("img",{src:i,alt:"Full-size Image"}))),n.createElement("br",null)))}},7300:function(e,t,r){r.r(t),r.d(t,{default:function(){return f}});var n=r(7294),s=r(4866),a=r(4405),o=(r(6118),r(1019),r(3869)),i=r(7500),l=(r(6953),r(982)),c=(r(5935),r(9417)),d=r(3643),u=r(3652).V.extend({defaultProps:{__TYPE:"Skeleton",shape:"rectangle",size:null,width:"100%",height:"1rem",borderRadius:null,animation:"wave",style:null,className:null,children:void 0}}),m=n.memo(n.forwardRef((function(e,t){var r=u.getProps(e),s=u.setMetaData({props:r}).ptm,a=n.useRef(null),o=r.size?{width:r.size,height:r.size,borderRadius:r.borderRadius}:{width:r.width,height:r.height,borderRadius:r.borderRadius},i=(0,d.AK)("p-skeleton p-component",{"p-skeleton-circle":"circle"===r.shape,"p-skeleton-none":"none"===r.animation},r.className);n.useImperativeHandle(t,(function(){return{props:r,getElement:function(){return a.current}}}));var l=(0,d.dG)({ref:a,className:i,style:o},u.getOtherProps(r),s("root"));return n.createElement("div",l)})));m.displayName="Skeleton";const p={apiKey:"AIzaSyAM5p7O6YuAvCxfDCbR48Duz019qkoVp0Y",authDomain:"itsmynodezena.firebaseapp.com",databaseURL:"https://itsmynodezena-default-rtdb.firebaseio.com",projectId:"itsmynodezena",storageBucket:"itsmynodezena.appspot.com",messagingSenderId:"299392955521",appId:"1:299392955521:web:ef5671ad2702d441304980"};function f(e){const{user:t}=(0,a.a)();s.Z.initializeApp(p,"app019");const r=s.Z.app("app019"),d=e.SetupidA,u=(e.SetupidB,e.SetsetupDp),f=(e.searchval,e.setSearchId,e.BlockedMe),g=e.setBlockedMe,{0:h,1:v}=(0,n.useState)(""),b=e.setlockedmeUsers;(0,n.useEffect)((()=>{if(!t)return;const n=r.database().ref("profile"),s=Array.isArray(e.idA)?e.idA:[e.idA],a=[],i=[],l=r=>{r.forEach((e=>{const r=e.val(),n=e.key,o=s.some((e=>n.includes(e)));n.includes(t.uid)&&i.push(r),o&&a.push(r)}));const n=a.map((e=>e.username)),l=a.map((e=>void 0!==e.blockedMe&&Object.keys(e.blockedMe)[0]&&e.username));l&&g(l);const c=a.map((e=>void 0!==e.Muted&&Object.keys(e.Muted)[0]&&e.username));v(c),console.log("i blocked these people",l),console.log("peps are",a);const m=a.map((e=>e.profileImg?e.profileImg:o.Z));d(n),u(m);const p=Object.keys(r.val()||{}).find((e=>e.includes((null==t?void 0:t.uid)||"")));if(p){const t=r.val()[p];e.setmyuser(Object.values(t.username||"You")),e.setmypic(Object.values(t.profileImg||{im:o.Z}))}b(i.map((e=>void 0!==e.blockedMe&&Object.keys(e.blockedMe)[0])))};return n.on("value",l),()=>{n.off("value",l)}}),[t,e.idA,e.setmyuser,d,u]);const{0:y,1:E}=(0,n.useState)(!1),w=async e=>{if(t){const n=e[0]===t.uid?e[1]:e[0];await r.database().ref("profile/"+t.uid+"/following/"+n).remove(),await r.database().ref("profile/"+n+"/following/"+t.uid).remove(),await r.database().ref("profile/"+n+"/followers/"+t.uid).remove(),await r.database().ref("profile/"+t.uid+"/followers/"+n).remove(),await r.database().ref("profile/"+n+"/blockedMe/"+t.uid).set(!0),alert("Blocked")}},x=(e.setshowmuted,e.showmuted);return t&&r.database().ref("profile")&&e.setup?x?n.createElement(n.Fragment,null,e.setup&&f&&f.includes(e.setup[e.setupidA])?"":e.setup&&h.includes(e.setup[e.setupidA])&&n.createElement("li",{style:{borderLeftColor:e.Ref&&e.Ref>0?"green":"black"},"data-toggle":"tab","data-target":"#inbox-message-1",className:"active"},e.Ref&&e.Ref>0?n.createElement("div",{className:"message-count bg-success"}," ",e.Ref&&e.Ref>0&&e.Ref," "):"",n.createElement("img",{style:{marginTop:"-65px"},alt:e.setup&&e.setup,className:"img-circle medium-image",src:e.setupDp&&e.setupDp[e.setupidA]}),n.createElement("div",{className:"vcentered info-combo"},n.createElement("h3",{className:"no-margin-bottom name"},n.createElement(i.Link,{style:{fontSize:"1rem",fontWeight:"bold",fontFamily:"monospace",textShadow:e.Ref&&e.Ref>0?"1px 1px 0.20px black":"1px 1px 0.10px Highlight",color:"black"},to:"profileComponents/Profiles/?id="+e.personid},e.setup&&e.setup[e.setupidA]," ")),n.createElement("h5",{style:{fontWeight:e.Ref&&e.Ref>0&&"bold",color:e.Ref&&e.Ref>0&&"black",textShadow:e.Ref&&e.Ref>0&&"1px 1px 0.25px Highlight"}},e.text),n.createElement("button",{onClick:e=>{e.stopPropagation(),E((e=>!e))},style:{background:"transparent",border:"none",color:"black",float:"right",zIndex:"100"}},n.createElement(l.G,{icon:c.S6C,style:{marginTop:"5px",float:"right"}}))),n.createElement("div",{className:"contacts-add mt-1"},n.createElement("span",{className:"message-time mt-1",style:{display:"flex"}},e.Ref&&e.Ref>0?n.createElement(l.G,{style:{marginTop:"5px"},icon:e.time.includes("days")?c.$nv:c.hnx}):"","   ",e.time," "),y&&n.createElement("div",{style:{display:"flex",justifyContent:"space-evenly",marginLeft:"auto",marginRight:"auto",padding:"5px 20px",width:"100%"}},n.createElement("button",{onClick:t=>{t.stopPropagation(),w(e.idA)},style:{background:"transparent",border:"none",color:"tomato"},tooltip:"Block"}," ",n.createElement(l.G,{className:"mx-2",icon:c.gPx,style:{marginTop:"5px"}})),n.createElement("button",{onClick:n=>{n.stopPropagation(),(async(e,n)=>{if(t){await r.database().ref("profile/"+(e[0]===t.uid?e[1]:e[0])+"/Muted/"+t.uid).remove();const s=h.filter((e=>e!==n));v(s),alert("unmuted",{mu:n})}})(e.idA,e.setup&&e.setup[e.setupidA])},tooltip:"Mute",style:{background:"transparent",border:"none",color:"black"}},"    ",n.createElement(l.G,{className:"mx-2",icon:c.AQZ,style:{marginTop:"5px"}})," "),n.createElement("button",{style:{background:"transparent",border:"none",color:"red"},tooltip:"report"},"  ",n.createElement(l.G,{className:"mx-2",icon:c.RrC,style:{marginTop:"5px"}})," "))))):n.createElement(n.Fragment,null,e.setup&&f&&f.includes(e.setup[e.setupidA])||e.setup&&h.includes(e.setup[e.setupidA])?"":n.createElement("li",{style:{borderLeftColor:e.Ref&&e.Ref>0?"green":"black"},"data-toggle":"tab","data-target":"#inbox-message-1",className:"active"},e.Ref&&e.Ref>0?n.createElement("div",{className:"message-count bg-success"}," ",e.Ref&&e.Ref>0&&e.Ref," "):"",n.createElement("img",{style:{marginTop:"-65px"},alt:"no Dp!",className:"img-circle medium-image",src:e.setupDp&&e.setupDp[e.setupidA]?e.setupDp[e.setupidA]:o.Z}),n.createElement("div",{className:"vcentered info-combo"},n.createElement("h3",{className:"no-margin-bottom name"},e.setup&&e.setup[e.setupidA]?n.createElement(i.Link,{style:{fontSize:"1rem",fontWeight:"bold",fontFamily:"monospace",textShadow:e.Ref&&e.Ref>0?"1px 1px 0.20px black":"1px 1px 0.10px Highlight",color:"black"},to:"/profileComponents/Profiles/?id="+e.personid},e.setup&&e.setup[e.setupidA]," "):"Deleted user"),n.createElement("h5",{style:{fontWeight:e.Ref&&e.Ref>0&&"bold",color:e.Ref&&e.Ref>0&&"black",textShadow:e.Ref&&e.Ref>0&&"1px 1px 0.25px Highlight"}},e.text),n.createElement("button",{onClick:e=>{e.stopPropagation(),E((e=>!e))},style:{background:"transparent",border:"none",color:"black",float:"right",zIndex:"100"}},n.createElement(l.G,{icon:c.S6C,style:{marginTop:"5px",float:"right"}}))),n.createElement("div",{className:"contacts-add mt-1"},n.createElement("span",{className:"message-time mt-1",style:{display:"flex"}},e.Ref&&e.Ref>0?n.createElement(l.G,{style:{marginTop:"5px"},icon:e.time.includes("days")?c.$nv:c.hnx}):"","   ",e.time," "),y&&n.createElement("div",{style:{display:"flex",justifyContent:"space-evenly",marginLeft:"auto",marginRight:"auto",padding:"5px 20px",width:"100%"}},n.createElement("button",{onClick:t=>{t.stopPropagation(),w(e.idA)},style:{background:"transparent",border:"none",color:"tomato"}}," ",n.createElement(l.G,{className:"mx-2",icon:c.gPx,style:{marginTop:"5px"}})),n.createElement("button",{onClick:n=>{n.stopPropagation(),(async e=>{t&&(await r.database().ref("profile/"+(e[0]===t.uid?e[1]:e[0])+"/Muted/"+t.uid).set(!0),alert("Muted"))})(e.idA)},style:{background:"transparent",border:"none",color:"black"}},"   ",n.createElement(l.G,{className:"mx-2",icon:c.YLJ,style:{marginTop:"5px"}})," "),n.createElement("button",{style:{background:"transparent",border:"none",color:"red"}},"  ",n.createElement(l.G,{className:"mx-2",icon:c.RrC,style:{marginTop:"5px"}})," "))))):n.createElement("div",{className:"flex mb-3"},n.createElement(m,{shape:"circle",size:"4rem",className:"mr-2"}),n.createElement("div",null,n.createElement(m,{width:"5rem",className:"mb-2"}),n.createElement(m,{width:"0rem",className:"mb-2"}),n.createElement(m,{width:"2rem",className:"mb-2 ",style:{float:" right"}}),n.createElement(m,{width:"1rem",className:"mb-2 ",style:{float:" right"}})))}},3377:function(e,t,r){r.r(t),r.d(t,{default:function(){return p}});var n=r(3433),s=r(3279),a=r.n(s),o=r(7294),i=r(4866),l=(r(6118),r(1019),r(3869)),c=(r(7500),r(6953),r(982)),d=r(1602),u=r(9417);const m={apiKey:"AIzaSyAM5p7O6YuAvCxfDCbR48Duz019qkoVp0Y",authDomain:"itsmynodezena.firebaseapp.com",databaseURL:"https://itsmynodezena-default-rtdb.firebaseio.com",projectId:"itsmynodezena",storageBucket:"itsmynodezena.appspot.com",messagingSenderId:"299392955521",appId:"1:299392955521:web:ef5671ad2702d441304980"};function p(e){const t=e.setCreatemesage,{0:r,1:s}=(e.selectedUser,(0,o.useState)([])),{0:p,1:f}=(0,o.useState)(null),{0:g,1:h}=(0,o.useState)(null),{0:v,1:b}=(0,o.useState)(null);console.log("this s the selected Acc",g),console.log("as you type logs data is",r.id),i.Z.initializeApp(m,"app0999");const y=i.Z.app("app0999"),E=a()((e=>{let t;r&&(t=e.query.trim().length?r.filter((t=>t&&t.useri&&t.useri.toLowerCase().startsWith(e.query.toLowerCase()))):(0,n.Z)(r),b(t))}),100);function w(){t(!1),g&&e.setId(p),e.setShowTextArea(!0),alert(p)}return(0,o.useEffect)((()=>{"object"!=typeof g&&y.database().ref("profile").orderByChild("username").equalTo(g).once("value").then((e=>{if(e.exists()){const t=Object.keys(e.val())[0],r=e.val()[t],n={id:t,useri:r.username,profileImg:r.profileImg?r.profileImg:l.Z};s([n]),f(n.id),console.log("if this shows why is it id",n.id)}else s([])}))}),[g]),o.createElement(o.Fragment,null,o.createElement(d.Q,{field:"name",value:g,suggestions:v,placeholder:"Send message to...",className:"borderradius mt-1",style:{borderTopRightRadius:"0",borderBottomRightRadius:"0"},completeMethod:e=>{E(e)},onChange:e=>h(e.value),itemTemplate:e=>o.createElement("div",{className:"flex align-items-center",onClick:w},o.createElement("img",{alt:"dP",src:e&&e.profileImg,style:{width:"28px"}}),o.createElement("div",{style:{color:"black"}},e&&e.useri))}),o.createElement("button",{style:{background:"white",border:"none",fontSize:g&&g.length>0?"1rem":" 1.5rem",marginLeft:"-5px",marginTop:"-1px",padding:"10px",borderTopLeftRadius:"0",borderBottomLeftRadius:"0",paddingTop:g&&g.length>0&&"14px",paddingBottom:g&&g.length>0&&"14px"},onClick:function(){(!g||g.length<1)&&t(!1),"object"!=typeof g&&y.database().ref("profile").orderByChild("username").equalTo(g).once("value").then((e=>{if(e.exists()){const t=Object.keys(e.val())[0],r=e.val()[t],n={id:t,useri:r.username,profileImg:r.profileImg?r.profileImg:l.Z};s([n]),f(n.id),console.log("if this shows why is it id",n.id)}else s([])}))},className:"btn btn-danger close-new-message"},o.createElement(c.G,{icon:g&&g.length>0?u.wn1:u.NBC,style:{cursor:"pointer",color:g&&g.length>0?"yellowgreen":"red"},type:"submit"})))}},5307:function(e,t,r){r.r(t),r.d(t,{default:function(){return ne}});var n=r(3433),s=r(3279),a=r.n(s),o=r(7294),i=r(4866),l=r(4405),c=(r(1405),r(6118),r(4184)),d=r.n(c),u=(r(2473),r(8977)),m=r(930),p=r(4357),f=r(5654),g=r(6056),h=r(7126);var v=o.createContext(null),b=r(2747),y=r(8146),E=r(861),w=r(5893);const x=["as","active","eventKey"];function k({key:e,onClick:t,active:r,id:n,role:s,disabled:a}){const i=(0,o.useContext)(h.Z),l=(0,o.useContext)(g.Z),c=(0,o.useContext)(v);let d=r;const u={role:s};if(l){s||"tablist"!==l.role||(u.role="tab");const t=l.getControllerId(null!=e?e:null),a=l.getControlledId(null!=e?e:null);u[(0,b.PB)("event-key")]=e,u.id=t||n,d=null==r&&null!=e?l.activeKey===e:r,!d&&(null!=c&&c.unmountOnExit||null!=c&&c.mountOnEnter)||(u["aria-controls"]=a)}return"tab"===u.role&&(u["aria-selected"]=d,d||(u.tabIndex=-1),a&&(u.tabIndex=-1,u["aria-disabled"]=!0)),u.onClick=(0,y.Z)((r=>{a||(null==t||t(r),null!=e&&i&&!r.isPropagationStopped()&&i(e,r))})),[u,{isActive:d}]}const S=o.forwardRef(((e,t)=>{let{as:r=E.ZP,active:n,eventKey:s}=e,a=function(e,t){if(null==e)return{};var r,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,x);const[o,i]=k(Object.assign({key:(0,h.h)(s,a.href),active:n},a));return o[(0,b.PB)("active")]=i.isActive,(0,w.jsx)(r,Object.assign({},a,o,{ref:t}))}));S.displayName="NavItem";var N=S;const C=["as","onSelect","activeKey","role","onKeyDown"];const I=()=>{},R=(0,b.PB)("event-key"),z=o.forwardRef(((e,t)=>{let{as:r="div",onSelect:n,activeKey:s,role:a,onKeyDown:i}=e,l=function(e,t){if(null==e)return{};var r,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,C);const c=(0,p.Z)(),d=(0,o.useRef)(!1),u=(0,o.useContext)(h.Z),y=(0,o.useContext)(v);let E,x;y&&(a=a||"tablist",s=y.activeKey,E=y.getControlledId,x=y.getControllerId);const k=(0,o.useRef)(null),S=e=>{const t=k.current;if(!t)return null;const r=(0,m.Z)(t,`[${R}]:not([aria-disabled=true])`),n=t.querySelector("[aria-selected=true]");if(!n||n!==document.activeElement)return null;const s=r.indexOf(n);if(-1===s)return null;let a=s+e;return a>=r.length&&(a=0),a<0&&(a=r.length-1),r[a]},N=(e,t)=>{null!=e&&(null==n||n(e,t),null==u||u(e,t))};(0,o.useEffect)((()=>{if(k.current&&d.current){const e=k.current.querySelector(`[${R}][aria-selected=true]`);null==e||e.focus()}d.current=!1}));const z=(0,f.Z)(t,k);return(0,w.jsx)(h.Z.Provider,{value:N,children:(0,w.jsx)(g.Z.Provider,{value:{role:a,activeKey:(0,h.h)(s),getControlledId:E||I,getControllerId:x||I},children:(0,w.jsx)(r,Object.assign({},l,{onKeyDown:e=>{if(null==i||i(e),!y)return;let t;switch(e.key){case"ArrowLeft":case"ArrowUp":t=S(-1);break;case"ArrowRight":case"ArrowDown":t=S(1);break;default:return}t&&(e.preventDefault(),N(t.dataset[(0,b.$F)("EventKey")]||null,e),d.current=!0,c())},ref:z,role:a}))})})}));z.displayName="Nav";var j=Object.assign(z,{Item:N}),O=r(6792);const A=o.forwardRef((({bsPrefix:e,active:t,disabled:r,eventKey:n,className:s,variant:a,action:o,as:i,...l},c)=>{e=(0,O.vE)(e,"list-group-item");const[u,m]=k({key:(0,h.h)(n,l.href),active:t,...l}),p=(0,y.Z)((e=>{if(r)return e.preventDefault(),void e.stopPropagation();u.onClick(e)}));r&&void 0===l.tabIndex&&(l.tabIndex=-1,l["aria-disabled"]=!0);const f=i||(o?l.href?"a":"button":"div");return(0,w.jsx)(f,{ref:c,...l,...u,onClick:p,className:d()(s,e,m.isActive&&"active",r&&"disabled",a&&`${e}-${a}`,o&&`${e}-action`)})}));A.displayName="ListGroupItem";var L=A;const T=o.forwardRef(((e,t)=>{const{className:r,bsPrefix:n,variant:s,horizontal:a,numbered:o,as:i="div",...l}=(0,u.Ch)(e,{activeKey:"onSelect"}),c=(0,O.vE)(n,"list-group");let m;return a&&(m=!0===a?"horizontal":`horizontal-${a}`),(0,w.jsx)(j,{ref:t,...l,as:i,className:d()(r,c,s&&`${c}-${s}`,m&&`${c}-${m}`,o&&`${c}-numbered`)})}));T.displayName="ListGroup";var M=Object.assign(T,{Item:L}),P=r(3561),D=(r(1019),r(3416)),B=r(7300),_=r(9507),F=r(6099),H=r(3377),Z=r(3869),G=(r(1512),r(5935),r(6638)),K=r(3814),U=r(9403),W=r(9417),$=r(7500),q=r(982),Y=r(411),V=r(7074),X=r(3643);function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Q.apply(this,arguments)}var J={defaultProps:{__TYPE:"InputTextarea",autoResize:!1,keyfilter:null,onBlur:null,onFocus:null,onInput:null,onKeyDown:null,onKeyUp:null,onPaste:null,tooltip:null,tooltipOptions:null,validateOnly:!1,children:void 0},getProps:function(e){return X.gb.getMergedProps(e,J.defaultProps)},getOtherProps:function(e){return X.gb.getDiffProps(e,J.defaultProps)}},ee=o.memo(o.forwardRef((function(e,t){var r=J.getProps(e),n=o.useRef(t),s=o.useRef(0),a=function(e){var t=n.current;t&&X.p7.isVisible(t)&&(s.current||(s.current=t.scrollHeight,t.style.overflow="hidden"),(s.current!==t.scrollHeight||e)&&(t.style.height="",t.style.height=t.scrollHeight+"px",parseFloat(t.style.height)>=parseFloat(t.style.maxHeight)?(t.style.overflowY="scroll",t.style.height=t.style.maxHeight):t.style.overflow="hidden",s.current=t.scrollHeight))};o.useEffect((function(){X.gb.combinedRefs(n,t)}),[n,t]),o.useEffect((function(){r.autoResize&&a(!0)}),[r.autoResize]);var i=o.useMemo((function(){return X.gb.isNotEmpty(r.value)||X.gb.isNotEmpty(r.defaultValue)}),[r.value,r.defaultValue]),l=X.gb.isNotEmpty(r.tooltip),c=J.getOtherProps(r),d=(0,X.AK)("p-inputtextarea p-inputtext p-component",{"p-disabled":r.disabled,"p-filled":i,"p-inputtextarea-resizable":r.autoResize},r.className);return o.createElement(o.Fragment,null,o.createElement("textarea",Q({ref:n},c,{className:d,onFocus:function(e){r.autoResize&&a(),r.onFocus&&r.onFocus(e)},onBlur:function(e){r.autoResize&&a(),r.onBlur&&r.onBlur(e)},onKeyUp:function(e){r.autoResize&&a(),r.onKeyUp&&r.onKeyUp(e)},onKeyDown:function(e){r.onKeyDown&&r.onKeyDown(e),r.keyfilter&&Y.F.onKeyPress(e,r.keyfilter,r.validateOnly)},onInput:function(e){var t=e.target;r.autoResize&&a(X.gb.isEmpty(t.value)),r.onInput&&r.onInput(e),X.gb.isNotEmpty(t.value)?X.p7.addClass(t,"p-filled"):X.p7.removeClass(t,"p-filled")},onPaste:function(e){r.onPaste&&r.onPaste(e),r.keyfilter&&Y.F.onPaste(e,r.keyfilter,r.validateOnly)}})),l&&o.createElement(V.u,Q({target:n,content:r.tooltip},r.tooltipOptions)))})));ee.displayName="InputTextarea";var te=r(4473);const re={apiKey:"AIzaSyALrSOduM9yvvHS_fR14WeCcgEhH5D8oCA",authDomain:"zenaglob.firebaseapp.com",databaseURL:"https://zenaglob-default-rtdb.firebaseio.com",projectId:"zenaglob",storageBucket:"zenaglob.appspot.com",messagingSenderId:"62411931925",appId:"1:62411931925:web:6581dc5950a7a2137fa91c",measurementId:"G-KDMQLLD16X"};function ne(){const{0:e,1:t}=(0,o.useState)(!0),{user:r,loading:s}=(0,l.a)(),c=(0,D.x0)();i.Z.initializeApp(re,"app015");const d=i.Z.app("app015"),{0:u,1:m}=(0,o.useState)(null),{0:p,1:f}=(0,o.useState)([]),{0:g,1:h}=(0,o.useState)([]),{0:v,1:b}=(0,o.useState)(""),{0:y,1:E}=(0,o.useState)([]),{0:w,1:x}=(0,o.useState)(null),k=((0,o.useRef)(null),(0,o.useRef)(null)),{0:S,1:N}=((0,o.useRef)(""),(0,o.useState)(null)),C=r&&r.uid+"-"+S,I=r&&S+"-"+r.uid,{0:R,1:z}=(0,o.useState)(null),{0:j,1:O}=(0,o.useState)(null),{0:A,1:L}=(0,o.useState)(null),{0:T,1:Y}=(0,o.useState)(null);(0,o.useEffect)((()=>{L(r&&r.uid+"-"+(R===r.uid?j&&j:R&&R)),Y(r&&(j===r.uid?R&&R:j&&j)+"-"+r.uid)}),[R,j]);const{0:V,1:X}=(0,o.useState)(""),Q=(0,o.useRef)(null),{0:J,1:ne}=(0,o.useState)(""),se=e=>{const t=e.target.files[0],r=new FileReader;r.readAsDataURL(t),r.onloadend=()=>{const e=r.result;b((t=>t+" "+e)),ne(e),k.current='<div class="card flex justify-content-center"><Image className="sized" src="'+e+'" zoomSrc="'+e+'" alt="Image" class="resizedImages" width="250" preview /></div>\n'}},{0:ae,1:oe}=(0,o.useState)(!1),ie=(0,o.useRef)(null);(0,o.useEffect)((()=>{const e=e=>{ie.current&&!ie.current.contains(e.target)&&oe(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[ie]);const le=()=>{oe(!ae)},ce=()=>{const e=v.split(" "),t=[];return e.forEach(((e,r)=>{if(e.startsWith("http")||e.startsWith("https")){const r=(e=>{const t=e.split(".").pop().toLowerCase();if("jpg"===t||"png"===t||"jpeg"===t||"gif"===t||"img"===t)return'<div class="card flex w-50 justify-content-center"><Image class="sized"   src="'+e+'" zoomSrc="'+e+'" alt="Image" class="resizedImages" width="250"  preview /></div>';if("mp4"===t)return'<video src="'+e+'" controls>Your browser does not support the video tag.</video>';if("mp3"===t)return'<audio src="'+e+'" controls>Your browser does not support the audio tag.</audio>';{const t=/^(https?:\/\/)?(www\.)?(youtube\.com|youtu\.be)\/(watch\?v=|embed\/|v\/)?([\w-]{11})(\S+)?$/,r=e.match(t);return r?'<div className="Fit" style="position: relative; padding-bottom: 56.25%; height: 300px, width: 300px">\n            <iframe\n            width="300"\n            height="300"\n            src=\'https://www.youtube.com/embed/'+r[5]+'\'\n            frameBorder="0"\n            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"\n            allowFullScreen\n            title="Embedded youtube"\n          ></iframe>\n\n\n\n             \n               </div>':e}})(e)||o.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"},e);t.push(r)}else e.startsWith("data:image/")&&t.push('<div class="card flex justify-content-center"><Image className="sized" src="'+e+'" zoomSrc="'+e+'" alt="Image" class="resizedImages" width="250" preview /></div>')})),t.join("")},{0:de,1:ue}=(0,o.useState)(""),{0:me,1:pe}=(0,o.useState)(""),fe=a()((e=>{const t=e.target.innerHTML;b(t),t.length<=0&&b("")}),300),ge=e=>{fe(e)};console.log("if this is the vals",v);const he=e=>{console.log(e),ot.current.innerHTML=ot.current.innerHTML+e.native},ve=e=>{if(!e)return"";const t=new Date-new Date(e);if(0===Math.floor(t/1e3))return"right_now";const r=Math.floor(t/1e3);if(r<60)return r+" sec ";const n=Math.floor(r/60);if(n<60)return n+" min ";const s=Math.floor(n/60);if(s<24)return s+" h ";const a=Math.floor(s/24);if(a<2)return a+" day ";if(a<30)return a+" day's ";const o=Math.floor(a/30);if(o<12)return o+" mo's ";if(o<1)return o+" mo ";return Math.floor(o/12)+" yr's "};console.log("if full image trigers",u);const{0:be,1:ye}=(0,o.useState)(null),{0:Ee,1:we}=(0,o.useState)(null),{0:xe,1:ke}=(0,o.useState)(Z.Z),{0:Se,1:Ne}=(0,o.useState)(null);(0,o.useEffect)((()=>{r&&d.database().ref("chats").on("value",(e=>{if(!e)return;const t=[];e.forEach((e=>{const n=e.val(),s=e.key.split("-"),a=Object.values(n);s.includes(r.uid)&&t.push(a)})),E(t),console.log("this are the filtered chats",t)}))}),[r]);const{0:Ce,1:Ie}=(0,o.useState)(null),{0:Re,1:ze}=(0,o.useState)(null),{0:je,1:Oe}=(0,o.useState)(null);console.log("this are the uSerA Data chats frm M",Ce);const{0:Ae,1:Le}=(0,o.useState)(!1),{0:Te,1:Me}=(0,o.useState)(!1);(0,o.useEffect)((()=>{void 0===s||s||setTimeout((()=>{void 0===s||s||(window.location.href="/")}),3e3)}),[s]);const Pe=a()(((e,t,r,n,s,a)=>{x(e),h(y[e]||[]),we(s),ye(n),z(t),r&&O(r),Le(!0)}),200),De=(e,t,r,n,s,a)=>{Pe(e,t,r,n,s,a),Qe(),a&&Me(!0)};(0,o.useEffect)((()=>{(()=>{const e=d.database().ref("chats/"+A);e.once("value",(t=>{if(t.exists())e.orderByChild("receiver").equalTo(r&&r.uid).once("value",(t=>{t&&t.forEach((t=>{!1===t.val().read&&e.child(t.key).update({read:!0})}))}));else{const e=d.database().ref("chats/"+T);e.once("value",(t=>{t.exists()&&e.orderByChild("receiver").equalTo(r&&r.uid).once("value",(t=>{t&&t.forEach((t=>{!1===t.val().read&&e.child(t.key).update({read:!0})}))}))}))}}))})()}),[De]);const Be=(0,o.useRef)(null),{0:_e,1:Fe}=(0,o.useState)(null),{0:He,1:Ze}=(0,o.useState)(null);console.log("these is the setupidA withot map ",Ce&&Ce);const{0:Ge,1:Ke}=(0,o.useState)(null),{0:Ue,1:We}=(0,o.useState)(!0),{0:$e,1:qe}=(0,o.useState)({});$e&&console.log("newMessages messages is ",$e);const{0:Ye,1:Ve}=(0,o.useState)(null);(0,o.useEffect)((()=>{const e=(0,n.Z)(Object.keys(y)).sort(((e,t)=>{const r=y[e].slice().reverse()[0].timestamp;return y[t].slice().reverse()[0].timestamp-r}));e&&e.map((e=>{if(e===w){const t=y[e].slice().reverse()[0].sender===r.uid&&y[e].slice().filter((e=>!1===e.read)).length;Ve(t);const n=y[e][0],s=n.sender===r.uid?r.uid:n.sender,a=n.receiver===r.uid?n.sender:n.receiver,o=Re&&Re[e],i=Ce&&Ce[e];De(e,s,a,o,i),qe((t=>({...t,[e]:0}))),Be.current=null}else if(e!==w){var t,n,s;if((null===(t=y[e][0])||void 0===t?void 0:t.sender)!==r.uid)Fe((null===(n=y[e][0])||void 0===n?void 0:n.sender)!==r.uid&&g.filter((e=>e.sender.length)).length),Ze((null===(s=y[e][0])||void 0===s?void 0:s.sender)!==r.uid&&y[e].filter((e=>e.sender.length)).length);Be.current=He>_e?He:null}}));const t=[];e&&e.map((e=>{y[e][0].sender===r.uid?t.push(y[e][0].receiver):t.push(y[e][0].sender)})),Ke(t)}),[y]);const Xe=(0,o.useRef)(null),Qe=()=>{Je()},Je=()=>{if(Xe.current){const e=Xe.current.getElementsByClassName("list-group-item");if(e.length>0){e[e.length-1].scrollIntoView({behavior:"smooth"})}}};(0,o.useEffect)((()=>{Je()}),[g]);const{0:et,1:tt}=(0,o.useState)(!1),{0:rt,1:nt}=(0,o.useState)(""),st=()=>{tt(!0)},at=()=>{tt(!1)};console.log("it exists ",S);const ot=(0,o.useRef)(""),{0:it,1:lt}=(0,o.useState)(!1),{0:ct,1:dt}=(0,o.useState)(!1),{0:ut,1:mt}=(0,o.useState)(null),{0:pt,1:ft}=(0,o.useState)(null);console.log("this is the val fi id  ",ut),console.log("this is the seadcc tis fi id  ",pt);const{0:gt,1:ht}=(0,o.useState)(!1),{0:vt,1:bt}=(0,o.useState)(1),{0:yt,1:Et}=(0,o.useState)(!1);const wt={};g.forEach((e=>{wt[e.textid]=!1}));const{0:xt,1:kt}=(0,o.useState)(wt);return r&&d.database().ref("chats")?o.createElement(o.Fragment,null,o.createElement(o.Fragment,null,o.createElement(te.Z,{setLight:t})),o.createElement("div",{style:{background:e&&" black"},id:e?"darkmode":"lightmode",className:(e&&"bg-dark darkmode ")+"  "},o.createElement("div",{style:{marginTop:"-15px",height:"fit-content"}},u&&o.createElement("div",{id:"myModal",className:"moda  "},o.createElement("span",{onClick:()=>m(null),className:"close"},"×"),o.createElement("div",{style:{marginBottom:"100px",width:"100%",height:"100%",margin:"auto",alignItems:"center",display:"flex",flexDirection:"column"}},o.createElement("div",{style:{display:"inline-block",float:"right",marginTop:"-45px"}},o.createElement("span",{onClick:()=>{bt(vt+.1)},style:{cursor:"pointer"},className:"m-3  text-light "},o.createElement(q.G,{className:"hover-text-light",icon:W.q9v})),o.createElement("span",{onClick:()=>{vt>1&&bt(vt-.1)},style:{cursor:"pointer",color:vt>1&&"white"},className:"m-3 hover-text-light "},o.createElement(q.G,{className:"",icon:W.Wq6}))),o.createElement("img",{style:{width:50*vt+"%",textAlign:"center",justifySelf:"center",marginLeft:"auto",marginRight:"auto"},zoomSrc:u,src:u,alt:"Full-size Image",preview:!0}))),o.createElement("div",{style:{height:"100vh",position:"fixed",left:"0",top:"70px",bottom:"0",background:"azure"}}," ",o.createElement("div",{className:"contacts-list   "+(Te?"contacts-li":"contacts-lili")},o.createElement("div",{className:"inbox-categories  "},o.createElement("div",{onClick:()=>lt(!1),"data-toggle":"tab","data-target":"#inbox",style:{color:it&&"black",borderBottomColor:"black"},className:""+(!it&&"active")}," Chats "),o.createElement("div",{onClick:()=>lt(!0),className:""+(it&&"active"),"data-toggle":"tab","data-target":"#marked"}," Muted ")),o.createElement("div",{className:"tab-content  "},o.createElement("div",{id:"inbox",className:"contacts-outter-wrapper tab-pane active "},o.createElement("input",{type:"text",className:"form-control",value:ut,onChange:e=>mt(e.target.value),name:"search",placeholder:" Search"}),o.createElement("span",{className:"fa fa-search form-control-feedback"}),o.createElement("div",{className:"contacts-outter "},o.createElement("ul",{className:"list-unstyled contacts"},(()=>{const e=(0,n.Z)(Object.keys(y)).sort(((e,t)=>{const r=y[e].slice().reverse()[0].timestamp;return y[t].slice().reverse()[0].timestamp-r}));if(ut){const e=(0,n.Z)(Object.keys(y)).sort(((e,t)=>{const r=y[e].slice().reverse()[0].timestamp;return y[t].slice().reverse()[0].timestamp-r}));e&&e.map((e=>{console.log("if this two are equal props shows props",ut&&ut.toLowerCase()===(Ce&&Ce[e]&&Ce[e].toLowerCase())),console.log(ut&&ut),console.log(Ce&&Ce),console.log("if this two are equal props shows good really",ut&&ut.toLowerCase(),Ce&&Ce[e]&&Ce[e].toLowerCase())}))}return console.log("show those who blocked me ",p),o.createElement(M,null,e&&e.map((e=>ut&&ut.length>1?ut&&ut.toLowerCase()===(Ce&&Ce[e]&&Ce[e].toLowerCase())&&o.createElement(M.Item,{key:e,active:e===w,style:{display:de&&de.some((t=>Array.isArray(t)&&t.includes(Ce&&Ce[e[0]])))?"none":"block",background:e===w&&"#fbfcff",borderRight:e===w&&"none",borderColor:e===w&&"yellowgreen"},onClick:()=>{var t;const n=y[e][0],s=n.sender===r.uid?r.uid:n.sender,a=n.receiver===r.uid?n.sender:n.receiver,o=Re&&Re[e],i=Ce&&Ce[e],l=null===(t=y[e])||void 0===t?void 0:t.slice().reverse()[0].timestamp;De(e,s,a,o,i,l)},onTouchEnd:()=>{var t;const n=y[e][0],s=n.sender===r.uid?r.uid:n.sender,a=n.receiver===r.uid?n.sender:n.receiver,o=Re&&Re[e],i=Ce&&Ce[e],l=null===(t=y[e])||void 0===t?void 0:t.slice().reverse()[0].timestamp;De(e,s,a,o,i,l)}},o.createElement(B.default,{personid:y[e][0].sender===r.uid?y[e][0].receiver:y[e][0].sender,setmypic:ke,showmuted:it,setshowmuted:lt,setlockedmeUsers:f,setmyuser:Ne,setupDp:Re,SetsetupDp:ze,userId:e,setupid:Ce,setSetupidA:Ie,conversations:y,setup:Ce,setupidA:[e][0],searchval:ut,setSearchId:ft,setBlockedMe:ue,BlockedMe:de,Ref:y[e].slice().reverse()[0].receiver===r.uid&&y[e].filter((e=>e.receiver===r.uid)).slice().filter((e=>!1===e.read)).length,SetupidA:Ie,SetupidB:Oe,idB:r&&r.uid,idA:Ge,text:e!==w?y[e].slice().reverse()[0].message.length>50?y[e].slice().reverse()[0].message.slice(0,50)+"...":y[e].slice().reverse()[0].message:"",time:ve(y[e].slice().reverse()[0].timestamp)})):o.createElement(M.Item,{key:e,active:e===w,style:{display:de&&de.some((t=>t&&t.includes(Ce&&Ce[e[0]])))&&"none",background:e===w&&"#fbfcff",borderRight:e===w&&"none",borderColor:e===w&&"yellowgreen"},onClick:()=>{var t;const n=y[e][0],s=n.sender===r.uid?r.uid:n.sender,a=n.receiver===r.uid?n.sender:n.receiver,o=Re&&Re[e],i=Ce&&Ce[e],l=null===(t=y[e])||void 0===t?void 0:t.slice().reverse()[0].timestamp;De(e,s,a,o,i,l)},onTouchEnd:()=>{var t;const n=y[e][0],s=n.sender===r.uid?r.uid:n.sender,a=n.receiver===r.uid?n.sender:n.receiver,o=Re&&Re[e],i=Ce&&Ce[e],l=null===(t=y[e])||void 0===t?void 0:t.slice().reverse()[0].timestamp;De(e,s,a,o,i,l)}},de&&de.includes(y[e][0].receiver===r.uid?y[e][0].sender:y[e][0].receiver)?"":o.createElement(B.default,{personid:y[e][0].sender===r.uid?y[e][0].receiver:y[e][0].sender,setmypic:ke,showmuted:it,setshowmuted:lt,setlockedmeUsers:f,setmyuser:Ne,setupDp:Re,SetsetupDp:ze,userId:e,setupid:Ce,setSetupidA:Ie,conversations:y,setup:Ce,setBlockedMe:ue,BlockedMe:de,setupidA:[e][0],searchval:ut,setSearchId:ft,Ref:y[e].slice().reverse()[0].receiver===r.uid&&y[e].filter((e=>e.receiver===r.uid)).slice().filter((e=>!1===e.read)).length,SetupidA:Ie,SetupidB:Oe,idB:r&&r.uid,idA:Ge,text:e!==w?y[e].slice().reverse()[0].message.length>50?y[e].slice().reverse()[0].message.slice(0,50)+"...":y[e].slice().reverse()[0].message:"",time:ve(y[e].slice().reverse()[0].timestamp)})))))})())))))),o.createElement("div",{className:(!Te&&"dnoned")+" backis",style:{marginBottom:"0",marginTop:"5px",marginBottom:"20px",height:"100vh"}},o.createElement("div",{className:"tab-content   "},"    ",o.createElement("div",{className:"tab-pane message-body active  ",id:"inbox-message-1"},o.createElement("div",{className:"message-top  bg-dark bgg asided",style:{position:"fixed",top:"0",zIndex:"101",background:"none",width:"fit-content"}},!w&&!ct&&o.createElement("button",{style:{background:"transparent",border:"none"},onClick:()=>dt(!0),className:"btn btn btn-success new-message bg-dark text-light  float-left"},o.createElement(q.G,{icon:W.mSY,style:{cursor:"pointer",color:"yellowgreen"},type:"submit"})," New Message"),o.createElement("div",{className:"new-message-wrappe "},ct&&o.createElement("div",{className:" form-group"},o.createElement(H.default,{setCreatemesage:dt,selectedUser:w,setId:N,setShowTextArea:ht})),o.createElement("div",{className:"chat-footer new-message-textarea d-none h-10 positon-absolute top-0 z-index-3 bg-dark",style:{zIndex:"4"}},o.createElement(ee,{className:"send-message-text bg-light"}),o.createElement("label",{className:"upload-file"},o.createElement("input",{type:"file",required:"",className:"bg-dark"}),o.createElement(q.G,{icon:W.nNP,style:{cursor:"pointer",color:"yellowgreen"},type:"submit"})),o.createElement("button",{type:"button",className:"send-message-button btn-info"},o.createElement(q.G,{icon:W.XCy,style:{cursor:"pointer",color:"yellowgreen"},type:"submit",disabled:!w}))))),o.createElement("div",{className:"{ message-chat  "+(!Te&&"message-chated")+" } bg-dark"},o.createElement("div",{className:"chat-body bg-success h-100  bg-dark",style:{marginBottom:"60px"}},o.createElement(o.Fragment,null,o.createElement(M,{ref:Xe},g.map((e=>o.createElement(M.Item,{key:e.textid},o.createElement("div",{style:{display:"flex",position:"fixed",top:"0",zIndex:"102"}},o.createElement("button",{onTouchEnd:()=>Me(!1),onClick:()=>Me(!1),style:{background:"transparent",border:"none",color:"#fefeff"}},o.createElement(q.G,{className:"bchevro",style:{paddingTop:"8px",fontSize:"1.6rem",marginLeft:"-7px",marginRight:"8px"},icon:W.A35})),o.createElement("img",{alt:Ee&&Ee,className:"mt-1 img-circle medium-image",src:be&&be}),o.createElement($.Link,{style:{color:"gray",fontWeight:" bold",fontStyle:" italic",fontFamily:"helvantica",fontSmooth:"auto"},to:"/profileComponents/Profiles/?id="+e.sender},o.createElement("h4",{style:{marginTop:"14px"}},Ee&&Ee," "))),e.sender===r.uid?o.createElement(_.default,{mypic:xe,fullSizeImage:u,setFullSizeImage:m,setmypic:ke,myuser:Se,setmyuser:Ne,setupidA:Ce,setupidB:je,hasRead:Ye,time:ve(e.timestamp),message:e.message,lockedmeUsers:p,setlockedmeUsers:f}):o.createElement(F.default,{pic:be,fullSizeImage:u,setFullSizeImage:m,named:Ee,setupidA:Ce,setupidB:je,personid:e.sender===r.uid?e.receiver:e.sender,message:e.message,lockedmeUsers:p,setlockedmeUsers:f,time:ve(e.timestamp)}),e.sender===r.uid&&o.createElement(o.Fragment,null,o.createElement("button",{onClick:()=>kt((t=>({...t,[e.textid]:!t[e.textid]}))),style:{background:"transparent",border:"none",color:"black",float:"right",marginLeft:"10px"}},o.createElement(q.G,{icon:W.S6C})),xt[e.textid]&&o.createElement(U.z,{variant:"link",style:{float:"right",marginTop:"-10px"},onClick:()=>{return t=e.textid,void d.database().ref("chats/"+A).once("value",(e=>{e.exists()?d.database().ref("chats/"+A).orderByChild("textid").equalTo(t).once("value",(e=>{e.exists()&&e.forEach((e=>{e.ref.remove()}))})):d.database().ref("chats/"+T).once("value",(e=>{e.exists()&&d.database().ref("chats/"+T).orderByChild("textid").equalTo(t).once("value",(e=>{e.exists()&&e.forEach((e=>{e.ref.remove()}))}))}))}));var t}},o.createElement(q.G,{style:{color:"darkred",fontSize:"1.1rem"},icon:W.$aW})))))))),gt&&o.createElement("div",{style:{position:"absolute",top:"25%",bottom:"25%",justifySelf:"center",alignItems:"center"}},o.createElement(U.z,{severity:"danger",outlined:!0,onClick:function(){ht(!1),N(null)}},o.createElement(q.G,{icon:W.NBC})," "),p.some((e=>e===j))?o.createElement("div",{style:{background:"black",color:"white",position:"fixed",bottom:"0"}},"  you are seeing this because this user blocked you! "):o.createElement(P.Z,{className:"bg-light",onSubmit:e=>{if(e.preventDefault(),console.log("does it exists ",S),Ge===r.uid)return alert("don't send message to yourself!!");const t=(0,D.x0)(),n=v,s=(new Date).getTime();if(!r)return;if(!S)return;const a=d.database().ref("chats/"+C);a.once("value",(e=>{if(e.exists())a.push({message:n,sender:r.uid,receiver:S,timestamp:s,textid:t,read:!1});else{const e=d.database().ref("chats/"+I);e.once("value",(o=>{o.exists()?e.push({message:n,sender:r.uid,receiver:S,timestamp:s,textid:t,read:!1}):a.push({message:n,sender:r.uid,receiver:S,timestamp:s,textid:t,read:!1})}))}})),b(""),ne(""),""===v&&(ot.current.innerHTML="")}},o.createElement(P.Z.Group,null,o.createElement("div",{id:"containered",className:"text-muted d-flex justify-content-start align-items-center pe-3 pt-3 mt-2   w-100 "},o.createElement("img",{src:xe,alt:r.uid,style:{width:"40px",height:"100%"}}),o.createElement("div",{className:"input-box b-dark h-100 fom-control fom-control-lg mb-2 h-auto",ref:ot,contentEditable:!0,onInput:ge,dangerouslySetInnerHTML:{__html:ce()},spellCheck:!0,style:{height:"fit-content",marginLeft:"auto",minHeight:"fit-content",background:"white",marginRight:"auto",overflow:"scroll",width:"40vw",border:"1px solid grey",padding:"20px 10px",color:"black",border:"1px solid #ccc",padding:"5px"},placeholder:"Text here ...",onFocus:st,onBlur:at}),o.createElement("div",{style:{display:"flex",justifyContent:"space-evenly",background:"white"}},o.createElement("input",{type:"file",accept:"image/*",onChange:se,ref:Q,style:{display:"none"}}),o.createElement("label",{className:"positions",htmlFor:"file-input",onClick:()=>Q.current.click()},o.createElement(q.G,{style:{fontSize:"1.3rem",marginLeft:"10px",cursor:"pointer",color:"black"},icon:W.l9f})),o.createElement(U.z,{onClick:le,type:"button",className:"hideit ms-0 p-1 ml-3 text-mute",style:{background:"transparent",border:"none"}},o.createElement(q.G,{style:{fontSize:"1.3rem",color:"#ffcb4d",cursor:"pointer"},icon:W.ctA})),ae&&o.createElement("div",{ref:ie},o.createElement(K.Z,{data:G,onEmojiSelect:he,style:{position:"absolute",bottom:"100%",right:"0"}})),o.createElement("button",{style:{fontSize:"1.3rem",cursor:"pointer",background:"none",border:"none",hover:"green"},className:"hovered ms-3 text-muted"},o.createElement(q.G,{icon:W.XCy,style:{cursor:"pointer",color:"yellowgreen"},type:"submit"})))))))),o.createElement("div",{style:{width:"100%",height:"70px",background:"rgb(251, 252, 255)",backgroundColor:"#f8f8f8",position:"fixed",bottom:"0",zIndex:"101"}},o.createElement("div",{style:{width:"60%",background:"#fbfcff",height:"fit-content",zIndex:"102"},className:"chat-foote ml-0 mr-0 w-70   position-fixed bottom-0 bg-light "},p.some((e=>e===j))?o.createElement("div",{style:{background:"black",color:"white",position:"fixed",bottom:"0"}},"  you are seeing this because this user blocked you! "):o.createElement(P.Z,{className:"bg-light",onSubmit:e=>(e=>{e.preventDefault();const t=v,n=(new Date).getTime();if(!r)return;const s=d.database().ref("chats/"+A);s.once("value",(e=>{if(e.exists())s.push({message:t,sender:r.uid,receiver:r.uid===j?R:j,timestamp:n,textid:c,read:!1});else{const e=d.database().ref("chats/"+T);e.once("value",(a=>{a.exists()?e.push({message:t,sender:r.uid,receiver:r.uid===j?R:j,timestamp:n,textid:c,read:!1}):s.push({message:t,sender:r.uid,receiver:r.uid===j?R:j,timestamp:n,textid:c,read:!1})}))}})),b(""),""===v&&(ot.current.innerHTML="")})(e)},o.createElement(P.Z.Group,null,Ae&&o.createElement("div",{id:"containered",className:"text-muted d-flex justify-content-start align-items-center pe-3 pt-3 mt-2   w-100 "},o.createElement("div",{className:"inheri",style:{backgroundColor:"white",width:"76vw",overflowY:"scroll",position:" absolute",bottom:"0",left:"0",right:"0",maxHeight:"150px",display:"flex"}},o.createElement("img",{src:xe,alt:r.uid,style:{width:"40px",height:"100%"}}),o.createElement("div",{className:"input-box b-dark h-100 fom-control fom-control-lg mb-2 h-auto",ref:ot,contentEditable:!0,onInput:ge,dangerouslySetInnerHTML:{__html:ce()},spellCheck:!0,style:{height:"fit-content",marginLeft:"auto",minHeight:"fit-content",background:"white",marginRight:"auto",overflow:"scroll",width:"100%",border:"1px solid grey",padding:"20px 10px",color:"black",border:"1px solid #ccc",borderRadius:"5px",padding:"10px 20px"},placeholder:"Text here ...",onFocus:st,onBlur:at}),o.createElement("div",{style:{display:"flex",justifyContent:"space-evenly",background:"white",alignItems:"center"}},o.createElement("input",{type:"file",accept:"image/*",onChange:se,ref:Q,style:{display:"none"}}),o.createElement("label",{className:"positions",htmlFor:"file-input",onClick:()=>Q.current.click()},o.createElement(q.G,{style:{fontSize:"1.3rem",marginLeft:"10px",cursor:"pointer",color:"black"},icon:W.l9f})),o.createElement(U.z,{onClick:le,type:"button",className:"hideit ms-0 p-1 ml-3 text-mute",style:{background:"transparent",border:"none"}},o.createElement(q.G,{style:{fontSize:"1.3rem",color:"#ffcb4d",cursor:"pointer"},icon:W.ctA})),ae&&o.createElement("div",{ref:ie},o.createElement(K.Z,{data:G,onEmojiSelect:he,style:{position:"absolute",bottom:"100%",right:"0"}})),o.createElement("button",{onClick:()=>{ot.current.innerHTML=" "},style:{fontSize:"1.3rem",cursor:"pointer",background:"none",border:"none",hover:"green",marginLeft:"10px",marginRight:"10px"},className:"hovered ms-3 text-muted"},o.createElement(q.G,{icon:W.XCy,style:{cursor:"pointer",color:"yellowgreen"},type:"submit"})))))))))))))))):o.createElement("div",null,"Loading")}},1512:function(e,t,r){var n,s=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},a.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return i(t,e),t},c=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=l(r(7294)),m=d(r(4063)),p=l(r(5697));function f(e){return e&&e.replace(/&nbsp;|\u202F|\u00A0/g," ").replace(/<br \/>/g,"<br>")}var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lastHtml=t.props.html,t.el="function"==typeof t.props.innerRef?{current:null}:u.createRef(),t.getEl=function(){return(t.props.innerRef&&"function"!=typeof t.props.innerRef?t.props.innerRef:t.el).current},t.emitChange=function(e){var r=t.getEl();if(r){var n=r.innerHTML;if(t.props.onChange&&n!==t.lastHtml){var s=Object.assign({},e,{target:{value:n}});t.props.onChange(s)}t.lastHtml=n}},t}return s(t,e),t.prototype.render=function(){var e=this,t=this.props,r=t.tagName,n=t.html,s=t.innerRef,o=c(t,["tagName","html","innerRef"]);return u.createElement(r||"div",a(a({},o),{ref:"function"==typeof s?function(t){s(t),e.el.current=t}:s||this.el,onInput:this.emitChange,onBlur:this.props.onBlur||this.emitChange,onKeyUp:this.props.onKeyUp||this.emitChange,onKeyDown:this.props.onKeyDown||this.emitChange,contentEditable:!this.props.disabled,dangerouslySetInnerHTML:{__html:n}}),this.props.children)},t.prototype.shouldComponentUpdate=function(e){var t=this.props,r=this.getEl();return!r||(f(e.html)!==f(r.innerHTML)||(t.disabled!==e.disabled||t.tagName!==e.tagName||t.className!==e.className||t.innerRef!==e.innerRef||t.placeholder!==e.placeholder||!(0,m.default)(t.style,e.style)))},t.prototype.componentDidUpdate=function(){var e=this.getEl();e&&(this.props.html!==e.innerHTML&&(e.innerHTML=this.props.html),this.lastHtml=this.props.html,function(e){var t=document.createTextNode("");e.appendChild(t);var r=document.activeElement===e;if(null!==t&&null!==t.nodeValue&&r){var n=window.getSelection();if(null!==n){var s=document.createRange();s.setStart(t,t.nodeValue.length),s.collapse(!0),n.removeAllRanges(),n.addRange(s)}e instanceof HTMLElement&&e.focus()}}(e))},t.propTypes={html:p.string.isRequired,onChange:p.func,disabled:p.bool,tagName:p.string,className:p.string,style:p.object,innerRef:p.oneOfType([p.object,p.func])},t}(u.Component);t.default=g},5043:function(e,t,r){var n=r(7294),s=Object.defineProperty,a=(e,t,r)=>(((e,t,r)=>{t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);const o=(e,t)=>typeof getComputedStyle<"u"?getComputedStyle(e,null).getPropertyValue(t):e.style.getPropertyValue(t),i=e=>o(e,"overflow")+o(e,"overflow-y")+o(e,"overflow-x");class l extends n.Component{constructor(e){super(e),a(this,"elementObserver"),a(this,"wrapper"),a(this,"lazyLoadHandler",(e=>{var t,r;const{onContentVisible:n}=this.props,[s]=e,{isIntersecting:a}=s;if(a){this.setState({visible:!0},(()=>{n&&n()}));const e=null==(t=this.wrapper)?void 0:t.current;e&&e instanceof HTMLElement&&(null==(r=this.elementObserver)||r.unobserve(e))}})),this.elementObserver=null,this.wrapper=n.createRef(),this.state={visible:!1}}componentDidMount(){var e;this.getEventNode();const{offset:t,threshold:r}=this.props,n={rootMargin:"number"==typeof t?`${t}px`:t||"0px",threshold:r||0};this.elementObserver=new IntersectionObserver(this.lazyLoadHandler,n);const s=null==(e=this.wrapper)?void 0:e.current;s instanceof HTMLElement&&this.elementObserver.observe(s)}shouldComponentUpdate(e,t){return t.visible}componentWillUnmount(){var e,t;const r=null==(e=this.wrapper)?void 0:e.current;r&&r instanceof HTMLElement&&(null==(t=this.elementObserver)||t.unobserve(r))}getEventNode(){var e;return(e=>{if(!(e instanceof HTMLElement))return window;let t=e;for(;t&&t!==document.body&&t!==document.documentElement&&t.parentNode;){if(/(scroll|auto)/.test(i(t)))return t;t=t.parentNode}return window})(null==(e=this.wrapper)?void 0:e.current)}render(){const{children:e,className:t,height:r,width:s,elementType:a}=this.props,{visible:o}=this.state,i={height:r,width:s},l=`LazyLoad${o?" is-visible":""}${t?` ${t}`:""}`;return(0,n.createElement)(a||"div",{className:l,style:i,ref:this.wrapper},o&&n.Children.only(e))}}a(l,"defaultProps",{elementType:"div",className:"",offset:0,threshold:0,width:null,onContentVisible:null,height:null})}}]);
//# sourceMappingURL=component---src-pages-profile-components-messages-js-fe85a2a011cca360ccd1.js.map