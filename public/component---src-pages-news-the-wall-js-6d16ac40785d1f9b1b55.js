"use strict";(self.webpackChunkblabzio=self.webpackChunkblabzio||[]).push([[1476],{3328:function(e,t,a){a.r(t);var n=a(4578),s=a(7294),o=(a(1019),a(3416)),i=a(4866);i.Z.initializeApp({apiKey:"AIzaSyChFGTB5YEugUKho-YqcWVZtKJG3PIrtt0",authDomain:"thewall-10a4a.firebaseapp.com",databaseURL:"https://thewall-10a4a-default-rtdb.firebaseio.com",projectId:"thewall-10a4a",storageBucket:"thewall-10a4a.appspot.com",messagingSenderId:"221023885061",appId:"1:221023885061:web:bc550d03edd2fbf60e496c",measurementId:"G-7V80059NF7"});const l=i.Z.database();let r=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this).state={videoFile:null,isRecording:!1,recordedVideo:null,videos:[]},t.loadVideos=()=>{l.ref("videos").on("value",(e=>{const a=[];e.forEach((e=>{const t={id:e.key,...e.val()};a.push(t)})),t.setState({videos:a})}))},t.handleFileChange=e=>{const a=e.target.files[0];a&&a.size<5e6?t.setState({videoFile:a}):alert("Please select a short video file (less than 5MB).")},t.handleRecordClick=()=>{t.state.isRecording?(t.state.mediaRecorder.stop(),t.setState({isRecording:!1})):navigator.mediaDevices.getUserMedia({video:!0}).then((e=>{const a=new MediaRecorder(e),n=[];a.addEventListener("dataavailable",(e=>{n.push(e.data)})),a.addEventListener("stop",(()=>{const e=new Blob(n,{type:"video/webm"});t.setState({recordedVideo:e})})),a.start(),t.setState({isRecording:!0,mediaRecorder:a,recordedChunks:n})})).catch((e=>{console.error("Error accessing video stream:",e)}))},t.handleUploadClick=()=>{const{videoFile:e,recordedVideo:a}=t.state;if(e||a){const t=i.Z.storage().ref().child(e?e.name:"recorded_video.webm").put(e||a);t.on("state_changed",(e=>{const t=e.bytesTransferred/e.totalBytes*100;console.log("Upload progress: "+t+"%")}),(e=>{console.error("Upload error:",e)}),(()=>{t.snapshot.ref.getDownloadURL().then((e=>{const t=(0,o.x0)();l.ref("videos/"+t).set({url:e,likes:0,dislikes:0,comments:[]})}))}))}},t.handleLike=e=>{l.ref("videos/"+e).transaction((e=>(e&&(e.likes=(e.likes||0)+1),e)))},t.handleDislike=e=>{l.ref("videos/"+e).transaction((e=>(e&&(e.dislikes=(e.dislikes||0)+1),e)))},t.handleComment=(e,t)=>{const a={id:(0,o.x0)(),text:t};l.ref("videos/"+e+"/comments").push(a)},t.handleDelete=e=>{window.confirm("Are you sure you want to delete this video?")&&l.ref("videos/"+e).remove()},t}(0,n.Z)(t,e);var a=t.prototype;return a.componentDidMount=function(){this.loadVideos()},a.render=function(){const{videos:e}=this.state;return s.createElement("div",{className:"container"},s.createElement("h1",null,"Video Uploader"),s.createElement("div",{className:"form-group"},s.createElement("input",{type:"file",accept:"video/*",onChange:this.handleFileChange})),s.createElement("div",{className:"form-group"},s.createElement("button",{className:"btn btn-primary",onClick:this.handleRecordClick},this.state.isRecording?"Stop Recording":"Start Recording")),s.createElement("div",{className:"form-group"},s.createElement("button",{className:"btn btn-success",onClick:this.handleUploadClick},"Upload")),s.createElement("hr",null),e.map((e=>s.createElement("div",{key:e.id,className:"card mb-3"},s.createElement("div",{className:"card-body"},s.createElement("video",{src:e.url,controls:!0,style:{width:"100%",cursor:"pointer"},onMouseEnter:e=>e.target.play(),onMouseLeave:e=>e.target.pause()}),s.createElement("div",{className:"text-muted mt-2"},"Likes: ",e.likes||0," | Dislikes: ",e.dislikes||0),s.createElement("div",{className:"my-3"},s.createElement("button",{className:"btn btn-sm btn-primary mr-2",onClick:()=>this.handleLike(e.id)},"Like"),s.createElement("button",{className:"btn btn-sm btn-danger",onClick:()=>this.handleDislike(e.id)},"Dislike")),s.createElement("div",null,s.createElement("h5",null,"Comments:"),s.createElement("ul",{className:"list-unstyled"},Object.values(e.comments||[]).map((e=>s.createElement("li",{key:e.id},e.text)))),s.createElement("div",{className:"input-group mb-3"},s.createElement("input",{type:"text",className:"form-control",placeholder:"Add a comment...","aria-label":"Add a comment","aria-describedby":"button-addon2",onChange:e=>this.setState({commentInput:e.target.value})}),s.createElement("div",{className:"input-group-append"},s.createElement("button",{className:"btn btn-outline-secondary",type:"button",id:"button-addon2",onClick:()=>this.handleComment(e.id,this.state.commentInput)},"Post")))),s.createElement("div",null,s.createElement("button",{className:"btn btn-danger btn-sm",onClick:()=>this.handleDelete(e.id)},"Delete")))))))},t}(s.Component);t.default=r},3416:function(e,t,a){a.d(t,{x0:function(){return n}});let n=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),"")}}]);
//# sourceMappingURL=component---src-pages-news-the-wall-js-6d16ac40785d1f9b1b55.js.map