/*! For license information please see bbd9b947ce362ee54d4ed5c3b47625abe81c5061-f126644c409396f1ea3e.js.LICENSE.txt */
"use strict";(self.webpackChunkblabzio=self.webpackChunkblabzio||[]).push([[2003],{6267:function(e,t,n){var r=n(8180),i=n(1435),a=n(4444),s=(n(389),n(3333),n(8463));function o(){return window}async function l(e,t,n){var r;const{BuildInfo:a}=o();(0,i.as)(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if((0,i.as)(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),l={};return(0,i.at)()?l.ibi=a.packageName:(0,i.au)()?l.apn=a.packageName:(0,i.av)(e,"operation-not-supported-in-this-environment"),a.displayName&&(l.appDisplayName=a.displayName),l.sessionId=s,(0,i.aw)(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,l)}const d=20;class u extends i.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function c(e){const t=await p()._get(v(e));return t&&await p()._remove(v(e)),t}function h(e,t){var n,r;const a=function(e){const t=_(e),n=t.link?decodeURIComponent(t.link):void 0,r=_(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return _(i).link||i||r||n||e}(t);if(a.includes("/__/auth/callback")){const t=_(a),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null==s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],l=o?(0,i.az)(o):null;return l?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:a,postBody:null}}return null}function g(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<d;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function p(){return(0,i.aC)(i.b)}function v(e){return(0,i.aD)("authEvent",e.config.apiKey,e.name)}function _(e){if(!(null==e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return(0,a.zd)(n.join("?"))}const f=class{constructor(){this._redirectPersistence=i.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=i.aE,this._overrideRedirectResult=i.aF}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new u(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){(0,i.av)(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,a,s,l,d,u,c,h;const g=o();(0,i.aA)("function"==typeof(null===(t=null==g?void 0:g.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,i.aA)(void 0!==(null===(n=null==g?void 0:g.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,i.aA)("function"==typeof(null===(s=null===(a=null===(r=null==g?void 0:g.cordova)||void 0===r?void 0:r.plugins)||void 0===a?void 0:a.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,i.aA)("function"==typeof(null===(u=null===(d=null===(l=null==g?void 0:g.cordova)||void 0===l?void 0:l.plugins)||void 0===d?void 0:d.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,i.aA)("function"==typeof(null===(h=null===(c=null==g?void 0:g.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===h?void 0:h.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const a=await this._initialize(e);await a.initialized(),a.resetRedirect(),(0,i.aG)(),await this._originValidation(e);const s=function(e,t,n=null){return{type:t,eventId:n,urlResponse:null,sessionId:g(),postBody:null,tenantId:e.tenantId,error:(0,i.az)(e,"no-auth-event")}}(e,n,r);await function(e,t){return p()._set(v(e),t)}(e,s);const d=await l(e,s,t);return async function(e,t,n){const{cordova:r}=o();let a=()=>{};try{await new Promise(((s,o)=>{let l=null;function d(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"==typeof t&&t(),"function"==typeof(null==n?void 0:n.close)&&n.close()}function u(){l||(l=window.setTimeout((()=>{o((0,i.az)(e,"redirect-cancelled-by-user"))}),2e3))}function c(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&u()}t.addPassiveListener(d),document.addEventListener("resume",u,!1),(0,i.au)()&&document.addEventListener("visibilitychange",c,!1),a=()=>{t.removePassiveListener(d),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",c,!1),l&&window.clearTimeout(l)}}))}finally{a()}}(e,a,await function(e){const{cordova:t}=o();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let a=null;r?t.plugins.browsertab.openUrl(e):a=t.InAppBrowser.open(e,(0,i.ay)()?"_blank":"_system","location=yes"),n(a)}))}))}(d))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=o(),n={};(0,i.at)()?n.iosBundleId=t.packageName:(0,i.au)()?n.androidPackageName=t.packageName:(0,i.av)(e,"operation-not-supported-in-this-environment"),await(0,i.ax)(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=o(),a=setTimeout((async()=>{await c(e),t.onEvent(m())}),500),s=async n=>{clearTimeout(a);const r=await c(e);let i=null;r&&(null==n?void 0:n.url)&&(i=h(r,n.url)),t.onEvent(i||m())};void 0!==n&&"function"==typeof n.subscribe&&n.subscribe(null,s);const l=r,d=`${i.packageName.toLowerCase()}://`;o().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(d)&&s({url:e}),"function"==typeof l)try{l(e)}catch(t){console.error(t)}}}};function m(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,i.az)("no-auth-event")}}function y(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function w(e=(0,a.z$)()){return!("file:"!==y()&&"ionic:"!==y()&&"capacitor:"!==y()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function b(e=(0,a.z$)()){return(0,a.w1)()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(e=(0,a.z$)()){return/Edge\/\d+/.test(e)}(e)}function I(){try{const e=self.localStorage,t=i.aL();if(e)return e.setItem(t,"1"),e.removeItem(t),!b()||(0,a.hl)()}catch(e){return R()&&(0,a.hl)()}return!1}function R(){return void 0!==n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function A(){return("http:"===y()||"https:"===y()||(0,a.ru)()||w())&&!((0,a.b$)()||(0,a.UG)())&&I()&&!R()}function E(){return w()&&"undefined"!=typeof document}const D={LOCAL:"local",NONE:"none",SESSION:"session"},P=i.aA,S="persistence";async function k(e){await e._initializationPromise;const t=C(),n=i.aD(S,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function C(){var e;try{return(null===(e="undefined"!=typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}const O=i.aA;class N{constructor(){this.browserResolver=i.aC(i.k),this.cordovaResolver=i.aC(f),this.underlyingResolver=null,this._redirectPersistence=i.a,this._completeRedirectFn=i.aE,this._overrideRedirectResult=i.aF}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return E()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return O(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!E()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function L(e){return e.unwrap()}function T(e){const{_tokenResponse:t}=e instanceof a.ZR?e.customData:e;if(!t)return null;if(!(e instanceof a.ZR)&&"temporaryProof"in t&&"phoneNumber"in t)return i.P.credentialFromResult(e);const n=t.providerId;if(!n||n===i.p.PASSWORD)return null;let r;switch(n){case i.p.GOOGLE:r=i.V;break;case i.p.FACEBOOK:r=i.U;break;case i.p.GITHUB:r=i.W;break;case i.p.TWITTER:r=i.Z;break;default:const{oauthIdToken:e,oauthAccessToken:a,oauthTokenSecret:s,pendingToken:o,nonce:l}=t;return a||s||e||o?o?n.startsWith("saml.")?i.aO._create(n,o):i.L._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:a}):new i.X(n).credential({idToken:e,accessToken:a,rawNonce:l}):null}return e instanceof a.ZR?r.credentialFromError(e):r.credentialFromResult(e)}function W(e,t){return t.catch((t=>{throw t instanceof a.ZR&&function(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null==t?void 0:t.code))t.resolver=new x(e,i.aq(e,t));else if(r){const e=T(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,T(r)),additionalUserInfo:i.ao(e),user:M.getOrCreate(n)};var r}))}async function U(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>W(e,n.confirm(t))}}class x{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return W(L(this.auth),this.resolver.resolveSignIn(e))}}class M{constructor(e){this._delegate=e,this.multiFactor=i.ar(e)}static getOrCreate(e){return M.USER_MAP.has(e)||M.USER_MAP.set(e,new M(e)),M.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return W(this.auth,i.a0(this._delegate,e))}async linkWithPhoneNumber(e,t){return U(this.auth,i.l(this._delegate,e,t))}async linkWithPopup(e){return W(this.auth,i.d(this._delegate,e,N))}async linkWithRedirect(e){return await k(i.aH(this.auth)),i.g(this._delegate,e,N)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return W(this.auth,i.a1(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return U(this.auth,i.r(this._delegate,e,t))}reauthenticateWithPopup(e){return W(this.auth,i.e(this._delegate,e,N))}async reauthenticateWithRedirect(e){return await k(i.aH(this.auth)),i.h(this._delegate,e,N)}sendEmailVerification(e){return i.ae(this._delegate,e)}async unlink(e){return await i.an(this._delegate,e),this}updateEmail(e){return i.aj(this._delegate,e)}updatePassword(e){return i.ak(this._delegate,e)}updatePhoneNumber(e){return i.u(this._delegate,e)}updateProfile(e){return i.ai(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return i.af(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}M.USER_MAP=new WeakMap;const V=i.aA;class Q{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;V(n,"invalid-api-key",{appName:e.name}),V(n,"invalid-api-key",{appName:e.name});const r="undefined"!=typeof window?N:void 0;this._delegate=t.initialize({options:{persistence:F(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(i.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?M.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){i.I(this._delegate,e,t)}applyActionCode(e){return i.a5(this._delegate,e)}checkActionCode(e){return i.a6(this._delegate,e)}confirmPasswordReset(e,t){return i.a4(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return W(this._delegate,i.a8(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return i.ad(this._delegate,e)}isSignInWithEmailLink(e){return i.ab(this._delegate,e)}async getRedirectResult(){V(A(),this._delegate,"operation-not-supported-in-this-environment");const e=await i.j(this._delegate,N);return e?W(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){(0,i.aH)(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:a}=j(e,t,n);return this._delegate.onAuthStateChanged(r,i,a)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:a}=j(e,t,n);return this._delegate.onIdTokenChanged(r,i,a)}sendSignInLinkToEmail(e,t){return i.aa(this._delegate,e,t)}sendPasswordResetEmail(e,t){return i.a3(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){P(Object.values(D).includes(t),e,"invalid-persistence-type"),(0,a.b$)()?P(t!==D.SESSION,e,"unsupported-persistence-type"):(0,a.UG)()?P(t===D.NONE,e,"unsupported-persistence-type"):R()?P(t===D.NONE||t===D.LOCAL&&(0,a.hl)(),e,"unsupported-persistence-type"):P(t===D.NONE||I(),e,"unsupported-persistence-type")}(this._delegate,e),e){case D.SESSION:t=i.a;break;case D.LOCAL:t=await i.aC(i.i)._isAvailable()?i.i:i.b;break;case D.NONE:t=i.N;break;default:return i.av("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return W(this._delegate,i._(this._delegate))}signInWithCredential(e){return W(this._delegate,i.$(this._delegate,e))}signInWithCustomToken(e){return W(this._delegate,i.a2(this._delegate,e))}signInWithEmailAndPassword(e,t){return W(this._delegate,i.a9(this._delegate,e,t))}signInWithEmailLink(e,t){return W(this._delegate,i.ac(this._delegate,e,t))}signInWithPhoneNumber(e,t){return U(this._delegate,i.s(this._delegate,e,t))}async signInWithPopup(e){return V(A(),this._delegate,"operation-not-supported-in-this-environment"),W(this._delegate,i.c(this._delegate,e,N))}async signInWithRedirect(e){return V(A(),this._delegate,"operation-not-supported-in-this-environment"),await k(this._delegate),i.f(this._delegate,e,N)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return i.a7(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function j(e,t,n){let r=e;"function"!=typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&M.getOrCreate(e)),error:t,complete:n}}function F(e,t){const n=function(e,t){const n=C();if(!n)return[];const r=i.aD(S,e,t);switch(n.getItem(r)){case D.NONE:return[i.N];case D.LOCAL:return[i.i,i.a];case D.SESSION:return[i.a];default:return[]}}(e,t);if("undefined"==typeof self||n.includes(i.i)||n.push(i.i),"undefined"!=typeof window)for(const r of[i.b,i.a])n.includes(r)||n.push(r);return n.includes(i.N)||n.push(i.N),n}Q.Persistence=D;class B{constructor(){this.providerId="phone",this._delegate=new i.P(L(r.Z.auth()))}static credential(e,t){return i.P.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}B.PHONE_SIGN_IN_METHOD=i.P.PHONE_SIGN_IN_METHOD,B.PROVIDER_ID=i.P.PROVIDER_ID;const z=i.aA;class G{constructor(e,t,n=r.Z.app()){var a;z(null===(a=n.options)||void 0===a?void 0:a.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new i.R(e,t,n.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}var H;(H=r.Z).INTERNAL.registerComponent(new s.wA("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Q(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:i.A.EMAIL_SIGNIN,PASSWORD_RESET:i.A.PASSWORD_RESET,RECOVER_EMAIL:i.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:i.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:i.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:i.A.VERIFY_EMAIL}},EmailAuthProvider:i.Q,FacebookAuthProvider:i.U,GithubAuthProvider:i.W,GoogleAuthProvider:i.V,OAuthProvider:i.X,SAMLAuthProvider:i.Y,PhoneAuthProvider:B,PhoneMultiFactorGenerator:i.m,RecaptchaVerifier:G,TwitterAuthProvider:i.Z,Auth:Q,AuthCredential:i.J,Error:a.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),H.registerVersion("@firebase/auth-compat","0.4.2")},9319:function(e,t,n){var r=n(8180),i=n(8463),a=n(5276),s=n(4444),o=n(3333);const l=new o.Yd("@firebase/database-compat"),d=function(e){const t="FIREBASE WARNING: "+e;l.warn(t)};class u{constructor(e){this._delegate=e}cancel(e){(0,s.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,s.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then((()=>e(null)),(t=>e(t))),t}remove(e){(0,s.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,s.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then((()=>e(null)),(t=>e(t))),t}set(e,t){(0,s.Dv)("OnDisconnect.set",1,2,arguments.length),(0,s.Wj)("OnDisconnect.set","onComplete",t,!0);const n=this._delegate.set(e);return t&&n.then((()=>t(null)),(e=>t(e))),n}setWithPriority(e,t,n){(0,s.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,s.Wj)("OnDisconnect.setWithPriority","onComplete",n,!0);const r=this._delegate.setWithPriority(e,t);return n&&r.then((()=>n(null)),(e=>n(e))),r}update(e,t){if((0,s.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,d("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,s.Wj)("OnDisconnect.update","onComplete",t,!0);const n=this._delegate.update(e);return t&&n.then((()=>t(null)),(e=>t(e))),n}}class c{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,s.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class h{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,s.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,s.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,s.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,s.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,s.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),(0,a.FQ)("DataSnapshot.child","path",e,!1),new h(this._database,this._delegate.child(e))}hasChild(e){return(0,s.Dv)("DataSnapshot.hasChild",1,1,arguments.length),(0,a.FQ)("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,s.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,s.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,s.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach((t=>e(new h(this._database,t))))}hasChildren(){return(0,s.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,s.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,s.Dv)("DataSnapshot.ref",0,0,arguments.length),new p(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class g{constructor(e,t){this.database=e,this._delegate=t}on(e,t,n,r){var i;(0,s.Dv)("Query.on",2,4,arguments.length),(0,s.Wj)("Query.on","callback",t,!1);const o=g.getCancelAndContextArgs_("Query.on",n,r),l=(e,n)=>{t.call(o.context,new h(this.database,e),n)};l.userCallback=t,l.context=o.context;const d=null===(i=o.cancel)||void 0===i?void 0:i.bind(o.context);switch(e){case"value":return(0,a.jM)(this._delegate,l,d),t;case"child_added":return(0,a.yv)(this._delegate,l,d),t;case"child_removed":return(0,a.MQ)(this._delegate,l,d),t;case"child_changed":return(0,a.Jr)(this._delegate,l,d),t;case"child_moved":return(0,a.Vt)(this._delegate,l,d),t;default:throw new Error((0,s.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,n){if((0,s.Dv)("Query.off",0,3,arguments.length),function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,s.gK)(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}("Query.off",e,!0),(0,s.Wj)("Query.off","callback",t,!0),(0,s.lb)("Query.off","context",n,!0),t){const r=()=>{};r.userCallback=t,r.context=n,(0,a.S1)(this._delegate,e,r)}else(0,a.S1)(this._delegate,e)}get(){return(0,a.U2)(this._delegate).then((e=>new h(this.database,e)))}once(e,t,n,r){(0,s.Dv)("Query.once",1,4,arguments.length),(0,s.Wj)("Query.once","callback",t,!0);const i=g.getCancelAndContextArgs_("Query.once",n,r),o=new s.BH,l=(e,n)=>{const r=new h(this.database,e);t&&t.call(i.context,r,n),o.resolve(r)};l.userCallback=t,l.context=i.context;const d=e=>{i.cancel&&i.cancel.call(i.context,e),o.reject(e)};switch(e){case"value":(0,a.jM)(this._delegate,l,d,{onlyOnce:!0});break;case"child_added":(0,a.yv)(this._delegate,l,d,{onlyOnce:!0});break;case"child_removed":(0,a.MQ)(this._delegate,l,d,{onlyOnce:!0});break;case"child_changed":(0,a.Jr)(this._delegate,l,d,{onlyOnce:!0});break;case"child_moved":(0,a.Vt)(this._delegate,l,d,{onlyOnce:!0});break;default:throw new Error((0,s.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return(0,s.Dv)("Query.limitToFirst",1,1,arguments.length),new g(this.database,(0,a.IO)(this._delegate,(0,a.Kk)(e)))}limitToLast(e){return(0,s.Dv)("Query.limitToLast",1,1,arguments.length),new g(this.database,(0,a.IO)(this._delegate,(0,a.vh)(e)))}orderByChild(e){return(0,s.Dv)("Query.orderByChild",1,1,arguments.length),new g(this.database,(0,a.IO)(this._delegate,(0,a.g2)(e)))}orderByKey(){return(0,s.Dv)("Query.orderByKey",0,0,arguments.length),new g(this.database,(0,a.IO)(this._delegate,(0,a.R)()))}orderByPriority(){return(0,s.Dv)("Query.orderByPriority",0,0,arguments.length),new g(this.database,(0,a.IO)(this._delegate,(0,a.HE)()))}orderByValue(){return(0,s.Dv)("Query.orderByValue",0,0,arguments.length),new g(this.database,(0,a.IO)(this._delegate,(0,a.Bd)()))}startAt(e=null,t){return(0,s.Dv)("Query.startAt",0,2,arguments.length),new g(this.database,(0,a.IO)(this._delegate,(0,a.e0)(e,t)))}startAfter(e=null,t){return(0,s.Dv)("Query.startAfter",0,2,arguments.length),new g(this.database,(0,a.IO)(this._delegate,(0,a.TQ)(e,t)))}endAt(e=null,t){return(0,s.Dv)("Query.endAt",0,2,arguments.length),new g(this.database,(0,a.IO)(this._delegate,(0,a.Wu)(e,t)))}endBefore(e=null,t){return(0,s.Dv)("Query.endBefore",0,2,arguments.length),new g(this.database,(0,a.IO)(this._delegate,(0,a.Lx)(e,t)))}equalTo(e,t){return(0,s.Dv)("Query.equalTo",1,2,arguments.length),new g(this.database,(0,a.IO)(this._delegate,(0,a.EW)(e,t)))}toString(){return(0,s.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,s.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,s.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof g)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,n){const r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,(0,s.Wj)(e,"cancel",r.cancel,!0),r.context=n,(0,s.lb)(e,"context",r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error((0,s.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}get ref(){return new p(this.database,new a.tn(this._delegate._repo,this._delegate._path))}}class p extends g{constructor(e,t){super(e,new a.JH(t._repo,t._path,new a.G$,!1)),this.database=e,this._delegate=t}getKey(){return(0,s.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,s.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new p(this.database,(0,a.iU)(this._delegate,e))}getParent(){(0,s.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new p(this.database,e):null}getRoot(){return(0,s.Dv)("Reference.root",0,0,arguments.length),new p(this.database,this._delegate.root)}set(e,t){(0,s.Dv)("Reference.set",1,2,arguments.length),(0,s.Wj)("Reference.set","onComplete",t,!0);const n=(0,a.t8)(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}update(e,t){if((0,s.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,d("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,a.mI)("Reference.update",this._delegate._path),(0,s.Wj)("Reference.update","onComplete",t,!0);const n=(0,a.Vx)(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}setWithPriority(e,t,n){(0,s.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,s.Wj)("Reference.setWithPriority","onComplete",n,!0);const r=(0,a.cy)(this._delegate,e,t);return n&&r.then((()=>n(null)),(e=>n(e))),r}remove(e){(0,s.Dv)("Reference.remove",0,1,arguments.length),(0,s.Wj)("Reference.remove","onComplete",e,!0);const t=(0,a.Od)(this._delegate);return e&&t.then((()=>e(null)),(t=>e(t))),t}transaction(e,t,n){(0,s.Dv)("Reference.transaction",1,3,arguments.length),(0,s.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,s.Wj)("Reference.transaction","onComplete",t,!0),function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error((0,s.gK)(e,t)+"must be a boolean.")}("Reference.transaction","applyLocally",n,!0);const r=(0,a.i3)(this._delegate,e,{applyLocally:n}).then((e=>new c(e.committed,new h(this.database,e.snapshot))));return t&&r.then((e=>t(null,e.committed,e.snapshot)),(e=>t(e,!1,null))),r}setPriority(e,t){(0,s.Dv)("Reference.setPriority",1,2,arguments.length),(0,s.Wj)("Reference.setPriority","onComplete",t,!0);const n=(0,a.Sl)(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}push(e,t){(0,s.Dv)("Reference.push",0,2,arguments.length),(0,s.Wj)("Reference.push","onComplete",t,!0);const n=(0,a.VF)(this._delegate,e),r=n.then((e=>new p(this.database,e)));t&&r.then((()=>t(null)),(e=>t(e)));const i=new p(this.database,n);return i.then=r.then.bind(r),i.catch=r.catch.bind(r,void 0),i}onDisconnect(){return(0,a.mI)("Reference.onDisconnect",this._delegate._path),new u(new a.vA(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class v{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:a.TD,forceLongPolling:a.Ot}}useEmulator(e,t,n={}){(0,a.dH)(this._delegate,e,t,n)}ref(e){if((0,s.Dv)("database.ref",0,1,arguments.length),e instanceof p){const t=(0,a.qT)(this._delegate,e.toString());return new p(this,t)}{const t=(0,a.iH)(this._delegate,e);return new p(this,t)}}refFromURL(e){(0,s.Dv)("database.refFromURL",1,1,arguments.length);const t=(0,a.qT)(this._delegate,e);return new p(this,t)}goOffline(){return(0,s.Dv)("database.goOffline",0,0,arguments.length),(0,a.Sb)(this._delegate)}goOnline(){return(0,s.Dv)("database.goOnline",0,0,arguments.length),(0,a.$o)(this._delegate)}}v.ServerValue={TIMESTAMP:(0,a.Bt)(),increment:e=>(0,a.nP)(e)};var _=Object.freeze({__proto__:null,initStandalone:function({app:e,url:t,version:n,customAuthImpl:r,namespace:s,nodeAdmin:o=!1}){(0,a.AM)(n);const l=new i.zt("auth-internal",new i.H0("database-standalone"));return l.setComponent(new i.wA("auth-internal",(()=>r),"PRIVATE")),{instance:new v((0,a.wj)(e,l,void 0,t,o),e),namespace:s}}});const f=v.ServerValue;var m;(m=r.Z).INTERNAL.registerComponent(new i.wA("database-compat",((e,{instanceIdentifier:t})=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("database").getImmediate({identifier:t});return new v(r,n)}),"PUBLIC").setServiceProps({Reference:p,Query:g,Database:v,DataSnapshot:h,enableLogging:a.U7,INTERNAL:_,ServerValue:f}).setMultipleInstances(!0)),m.registerVersion("@firebase/database-compat","0.3.4")}}]);
//# sourceMappingURL=bbd9b947ce362ee54d4ed5c3b47625abe81c5061-f126644c409396f1ea3e.js.map